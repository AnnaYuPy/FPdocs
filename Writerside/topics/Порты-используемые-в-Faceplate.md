# Конфигурация Faceplate

## Порты, используемые в Faceplate, и их настройка

В Faceplate используется несколько портов для связи и обмена данными. Вот их описание:

<b>1883</b>: предназначен для протокола MQTT (Message Queuing Telemetry Transport), используемого для обмена данными между устройствами IoT и серверами Faceplate.

<b>6660</b>: используется для подключения к серверу лицензий.

<b>7000</b>: используется для соединения с различными компонентами системы по протоколу HTTP.

<b>7443</b>: аналогичен порту 7000, однако обеспечивает защищенное подключение через протокол HTTPS для безопасного веб-доступа.

<b>8000</b>: служит для подключения к базе данных ECOMET.

<b>9000</b>: зарезервирован для соединения с Faceplate Studio и Runtime.

<b>9443</b>: аналогичен порту 9000, обеспечивая защищенное соединение через HTTPS для Faceplate Studio и Runtime.

В пакете Faceplate есть несколько конфигурационных файлов, где при необходимости можно перекофигурировать номера портов.

## Конфигурационные файлы

1. Конфигурационный файл <b>.../faceplate/releases/3.5/apps/fp.faceplate.config</b>:

```bash
[
   {fp, [
      {system_account,<<"system">>},
      {http,9000},
      {https,9443},
      {cacertfile, "etc/certs/ca-chain.cert.pem"},
      {certfile, "etc/certs/node.cert.pem"},
      {keyfile,  "etc/certs/node.key.pem"},
      {license_server_host,{192,168,1,3}},
      {license_server_port,6660},
   {email, "support@faceplate.io"}
   ]}
].
```

Этот файл содержит основные настройки Faceplate, такие как порты серверов, пути к сертификатам, адреса сервера лицензий и контактные данные для поддержки.

| Настройка                                   | Описание                                                                              |
|---------------------------------------------|---------------------------------------------------------------------------------------|
| {fp, [...]}                                 | раздел с настройками для Faceplate;                                                   |
| {system_account,<<"system">>}               | учетная запись системы; в данном случае, учетная запись имеет значение "system";      |
| {http,9000}                                 | порт HTTP-сервера; здесь указан порт 9000;                                            |
| {https,9443}                                | порт HTTPS-сервера; здесь указан порт 9443;                                           |
| {cacertfile, "etc/certs/ca-chain.cert.pem"} | путь к файлу сертификата центра сертификации (CA);                                    |
| {certfile, "etc/certs/node.cert.pem"}       | путь к файлу сертификата узла;                                                        |
| {keyfile, "etc/certs/node.key.pem"}         | путь к файлу закрытого ключа узла;                                                    |
| {license_server_host,{192,168,1,3}}         | IP-адрес хоста лицензионного сервера. В данном случае, указан IP-адрес 192.168.1.3;   |
| {license_server_port,6660}                  | порт лицензионного сервера; здесь указан порт 6660;                                   |
| {email, "support@faceplate.io"}             | адрес электронной почты для поддержки;                                                |

2. Конфигурационный файл <b>.../faceplate/releases/3.5/apps/ fp.ecomet.config</b>:

```bash
[
   {ecomet, [
      {schema_server_cycle,5000},
      {stop_timeout,60000},
      {password,"111111"},
      {supervisor_max_restarts,10},
      {supervisor_max_period,1000},
         {disable_subscriptions, false},
         {router_pool_size, 128},
         {http,[
            {port,8000}
         ]},
      {https,undefined},
      {process_memory_limit,100}
   ]}
].
```

Этот файл содержит основные настройки подключения к базе данных Ecomet.

| Настройка                      | Описание                                                                                                                                     |
|--------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| {ecomet, [...]}                | раздел с настройками для базы данных Ecomet;                                                                                                 |
| {schema_server_cycle,5000}     | интервал цикла сервера схемы базы данных; здесь указан интервал в 5000 миллисекунд (5 секунд);                                               |
| {stop_timeout,60000}           | время ожидания остановки базы данных; здесь указано время в 60000 миллисекунд (60 секунд);                                                   |
| {password,"111111"}            | пароль доступа к базе данных; в данном случае, пароль установлен как "111111";                                                               |
| {supervisor_max_restarts,10}   | максимально допустимое количество перезапусков супервизора базы данных; здесь указано значение 10;                                           |
| {supervisor_max_period,1000}   | максимальный период времени для перезапуска супервизора базы данных; здесь указано значение 1000 миллисекунд (1 секунда);                    |
| {disable_subscriptions, false} | поле, определяющее, отключены ли процессы-подписчики к базе данных; здесь указано значение "false", что означает, что подписки не отключены; |
| {router_pool_size, 128}        | размер пула маршрутизатора для базы данных; здесь указан размер 128;                                                                         |
| {http,[ {port,8000} ]}         | настройки HTTP-сервера для базы данных, включая порт; здесь указан порт 8000;                                                                |
| {https,undefined}              | настройки HTTPS-сервера для базы данных; здесь HTTPS-сервер не определен (undefined);                                                        | 
| {process_memory_limit,100}     | лимит памяти для процессов базы данных; здесь указан лимит в 100 мегабайт;                                                                   | 

