<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-06-03T17:59:08.032593434"><title>IoT-соединения | Faceplate docs</title><script type="application/json" id="virtual-toc-data">[{"id":"iot","level":0,"title":"Что такое IoT","anchor":"#iot"},{"id":"why","level":0,"title":"Почему используются IoT-соединения","anchor":"#why"},{"id":"settings","level":0,"title":"Настройка IoT-соединений в FACEPLATE","anchor":"#settings"},{"id":"how to create","level":0,"title":"Как создать IoT-подключение","anchor":"#how to create"},{"id":"vbf6ry_87","level":0,"title":"Режим трансформации","anchor":"#vbf6ry_87"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="IoT-соединения | Faceplate docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Faceplate docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/iot-соединения.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="IoT-соединения | Faceplate docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/iot-соединения.html#webpage",
    "url": "writerside-documentation/iot-соединения.html",
    "name": "IoT-соединения | Faceplate docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Faceplate docs Help"
}</script><!-- End Schema.org --></head><body data-id="IoT-соединения" data-main-title="IoT-соединения" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Faceplate-Tutorial.md|Faceplate (Tutorial)"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Faceplate docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="IoT-соединения" id="IoT-соединения.md">IoT-соединения</h1><section class="chapter"><h2 id="iot" data-toc="iot">Что такое IoT</h2><p id="vbf6ry_2">IoT расшифровывается как &quot;Интернет вещей&quot; (Internet of Things). Это концепция, в основе которой лежит идея о сети взаимосвязанных устройств, способных собирать и обмениваться данными через Интернет без прямого участия человека. Устройства IoT могут быть чем угодно: от умных домашних устройств, таких как термостаты и умные замки, до промышленного оборудования, автомобилей и даже медицинских приборов.</p><p id="vbf6ry_3">Основная идея IoT заключается в том, чтобы сделать устройства &quot;умными&quot;, т.е. снабдить их сенсорами, актюаторами и возможностью подключения к интернету, что позволяет им собирать данные о своем окружении, взаимодействовать друг с другом и с внешними системами, а также выполнять различные задачи с минимальной или нулевой человеческой интервенцией.</p></section><section class="chapter"><h2 id="why" data-toc="why">Почему используются IoT-соединения</h2><p id="vbf6ry_4">IoT-соединения имеют ряд преимуществ и используются для:</p><ol class="list _decimal" id="vbf6ry_5" type="1"><li class="list__item" id="vbf6ry_6"><p>Расширения возможностей мониторинга и управления: Подключение IoT-устройств позволяет расширить область мониторинга и управления промышленными процессами. Данные, собранные с помощью IoT-устройств, могут дополнять информацию, собираемую традиционными средствами, обогащая ее и позволяя получать более полное представление о состоянии системы. </p><br></li><li class="list__item" id="vbf6ry_8"><p>Увеличения доступности данных: IoT-соединения могут обеспечить доступ к данным из удаленных местоположений, где установка традиционной инфраструктуры IIoT-платформы может быть сложной или дорогостоящей. Это позволяет мониторить и управлять процессами на расстоянии, что особенно важно для компаний с распределенными объектами. </p><br></li><li class="list__item" id="vbf6ry_10"><p>Улучшения гибкости и масштабируемости: Использование IoT-соединений позволяет создавать более гибкие и масштабируемые системы мониторинга и управления. Устройства IoT могут быть легко добавлены или удалены из сети, а сама сеть может быть масштабирована по мере необходимости, обеспечивая возможность адаптации к изменяющимся требованиям бизнеса. </p><br></li><li class="list__item" id="vbf6ry_12"><p>Использования современных технологий и аналитики: IoT-устройства могут предоставлять данные в реальном времени, что позволяет использовать современные технологии аналитики для обработки и анализа этих данных. Это может включать в себя применение методов машинного обучения для выявления аномалий или оптимизации процессов на основе собранных данных. </p><br></li><li class="list__item" id="vbf6ry_14"><p>Снижения затрат на обслуживание и эксплуатацию: Использование IoT-соединений может снизить затраты на обслуживание и эксплуатацию системы за счет возможности удаленного мониторинга и управления процессами. Это может включать в себя раннее обнаружение проблем и предотвращение аварийных ситуаций, что помогает сократить расходы на ремонт и замену оборудования. </p><br></li></ol></section><section class="chapter"><h2 id="settings" data-toc="settings">Настройка IoT-соединений в FACEPLATE</h2><p id="vbf6ry_16">Для настройки IoT-соединения в FACEPLATE необходимо выбрать один из протоколов (HTTP, MQTT, WebSocket), согласно которому будет установлено подключение и будут передаваться данные.</p><p id="vbf6ry_17">Для настройки обмена данными по выбранному протоколу между FACEPLATE и другими информационными системами используются следующие компоненты: <br> ● тип подключения (connection); <br> ● тип привязки (binding); <br> ● реакция (reaction) или направление передачи данных: источник данных (source) или действия (actions). <br></p><p id="vbf6ry_22">Структуру и общий принцип работы IoT-соединений в FACEPLATE можно представить следующим образом:</p><figure id="vbf6ry_23"><a href="FPdocs/IoT1.png" class="lightbox"><img alt="Io t1" src="FPdocs/IoT1.png" class="article__bordered-element" title="Io t1" width="500" height="388"></a></figure><p id="vbf6ry_24">Тип подключения позволяет установить базовые параметры соединения (название, протокол, период между попытками установки соединения и т.д.), включить или выключить соединение.</p><p id="vbf6ry_25">Соединение может включать в себя одну или несколько привязок. У привязки есть общие параметры, такие как название и тип привязки. Тип привязки определяет способ взаимодействия между системами:</p><ol class="list _decimal" id="vbf6ry_26" type="1"><li class="list__item" id="vbf6ry_27"><p>SEND - система только отправляет данные во внешнюю систему. Содержит только раздел Output. </p><br></li><li class="list__item" id="vbf6ry_29"><p>SEND_RECEIVE - система отправляет запрос во внешнюю система и ожидает, что внешняя система вернет какие-либо данные в ответ. Содержит раздел Output, за которым следует раздел Input. </p><br></li><li class="list__item" id="vbf6ry_31"><p>RECEIVE - система ожидает данные из внешней системы и не отправляет ничего в ответ. Содержит только раздел Input. </p><br></li><li class="list__item" id="vbf6ry_33"><p>RECEIVE_SEND - система ожидает данные из внешней системы и формирует ответ. Содержит раздел Input, за которым следует раздел Output. </p><br></li></ol><p id="vbf6ry_35">Некоторые протоколы позволяют использовать все 4 типа привязок в одном соединении, другие позволяют использовать только определенные типы привязок в зависимости от настроек соединения.</p><p id="vbf6ry_36">В общем случае, в разделах Input/Output определяется json-шаблон, по которому будут формироваться данные для приема/передачи из/в удаленную систему. Так же в этом разделе может быть определен ряд параметров, используемых при передаче данных. Набор данных параметров зависит от протокола соединения.</p><p id="vbf6ry_37">Для первых двух типов привязок в разделе Output помимо json-шаблона и параметров, специфичных для протокола, так же определяется событие, инициирующее обмен данными.</p></section><section class="chapter"><h2 id="how to create" data-toc="how to create">Как создать IoT-подключение</h2><p id="vbf6ry_38">Настройка IoT-соединения выполняется во вкладке &quot;Общий вид&quot;, расположенной в меню навигации FACEPLATE Studio. На панели управления следует нажать на кнопку Создать, после чего появится окно:</p><figure id="vbf6ry_39"><a href="FPdocs/IoT2.png" class="lightbox"><img alt="Io t2" src="FPdocs/IoT2.png" class="article__bordered-element" title="Io t2" width="500" height="408"></a></figure><section class="chapter"><h3 id="HTTP-connection" data-toc="HTTP-connection">Настройка HTTP-подключения</h3><p id="vbf6ry_40">Подключения данного типа позволяют FACEPLATE обмениваться данными с удаленными системами посредством протокола HTTP. Задача, которая традиционно решается с помощью протокола HTTP - это обмен данными между пользовательским приложением (например, веб-браузер), осуществляющим доступ к веб-ресурсам (веб-сервер). <br></p><p id="vbf6ry_42">&bull; HTTP (Hypertext Transfer Protocol) - это протокол, который используется для передачи данных в форме гипертекстовых документов (например, веб-страниц) между клиентом и сервером в сети Интернет. <br>&bull; HTTP предполагает однонаправленную связь, где клиент отправляет запрос на сервер, а сервер отвечает на этот запрос, обычно отправляя запрошенные данные. <br>&bull; Каждое HTTP-сообщение состоит из запроса и ответа. Запрос отправляется клиентом на сервер, и сервер отвечает на этот запрос соответствующим ответом. <br>&bull; HTTP не сохраняет состояние между запросами. Каждый запрос рассматривается отдельно, и сервер не запоминает предыдущие запросы от одного и того же клиента, если не используются механизмы сеансов или куки. <br>&bull; HTTP-запросы и ответы обычно представлены в виде текстовых сообщений, состоящих из заголовков и тела сообщения. <br>&bull; HTTP поддерживает различные методы запроса, такие как GET (получить), POST (отправить), PUT (обновить), DELETE (удалить) и другие, которые определяют действие, выполняемое сервером. <br></p></section><section class="chapter"><h3 id="HTTP-server" data-toc="HTTP-server">Настройка привязки серверного HTTP соединения</h3><p id="vbf6ry_49">При создании подключения типа IOT_HTTP_SERVER появляется следующая форма:</p><figure id="vbf6ry_50"><a href="FPdocs/IoT4.png" class="lightbox"><img alt="Io t4" src="FPdocs/IoT4.png" class="article__bordered-element" title="Io t4" width="500" height="281"></a></figure><p id="vbf6ry_51">Если был выбран тип HTTP соединения Server, то привязка может быть типа RECEIVE-ONLY или типа RECEIVE-SEND. Настройка привязки серверного HTTP соединения выполняется в следующей форме:</p><p id="vbf6ry_52">Для серверного соединения может быть активирована опция &quot;Аутентификация по сертификату&quot;.</p><p id="vbf6ry_53">После активации этой опции появится возможность выбора сертификата, с которым будет сверятся сертификат, полученный в клиентском запросе. В данном случае, аутентификация будет происходить в два этапа. На первом этапе сервер проверит, является ли полученный от клиента сертификат доверенным (соответствует ли издатель клиентского сертификата издателю сертификата сервера, сертификат сервера указывается в настройках системы). При этом Common Name (CN) у пользовательского сертификата не должно совпадать с CN серверного сертификата.</p><p id="vbf6ry_54">Если на этом этапе возникают ошибки при попытке соединения с сервером, для тестирования соединения можно воспользоваться утилитой командной строки curl:</p><p id="vbf6ry_55">curl -k -vvvv --cert файл_сертификата.cert.pem --key файл_ключа.key.pem --cacert файл_корневого_сертификата.cert.pem &quot;https://путь к сервису&quot;.</p><p id="vbf6ry_56">Если первый этап пройден, на втором этапе клиентский сертификат сверяется с сертификатом, указанным в поле выбора сертификата настроек HTTP соединения. Если сертификат в клиентском запросе отсутствует или не соответствует заданному, считается, что клиент не прошел процедуру аутентификации.</p><p id="vbf6ry_57">Непосредственно к HTTP протоколу относятся следующие поля:</p><ol class="list _decimal" id="vbf6ry_58" type="1"><li class="list__item" id="vbf6ry_59"><p>Путь к настраиваемому сервису (path). Пример полного пути к сервису, настраиваемого в сторонней системе:</p></li></ol><p id="vbf6ry_60">localhost:9000/rest// ?town=London &amp; appid=4459999<br> localhost:9000/rest - имя хоста, порт на котором запущен faceplate, rest - префикс для всех rest запросов<br> http_server_connection_name - имя соединения<br> http_server_binding_name - имя привязки<br> http_path - дополнительный путь, настраивается в поле &quot;путь&quot; (path) привязки. <br> town=London &amp; appid=4459999 - строка запроса<br></p><ol class="list _decimal" id="vbf6ry_69" type="1" start="2"><li class="list__item" id="vbf6ry_70"><p id="vbf6ry_71">Метод запроса - GET или POST.</p></li><li class="list__item" id="vbf6ry_72"><p id="vbf6ry_73">Заголовки HTTP - настройки заголовков HTTP. Каждый входящий запрос проверяется на соответствие заголовка установленному шаблону.</p></li><li class="list__item" id="vbf6ry_74"><p id="vbf6ry_75">URL запрос - настройки параметров запроса. Каждый входящий запрос проверяется на соответствие параметров запроса установленным шаблонам.</p></li></ol></section><section class="chapter"><h3 id="HTTP-client" data-toc="HTTP-client">Настройка привязки клиентского HTTP соединения</h3><p id="vbf6ry_76">Если был выбран тип HTTP соединения Client, то привязка может быть типа SEND-ONLY или типа SEND-RECEIVE. Настройка привязки клиентского HTTP соединения выполняется в следующей форме:</p><p id="vbf6ry_77">Непосредственно к HTTP протоколу относятся следующие поля:</p><ol class="list _decimal" id="vbf6ry_78" type="1"><li class="list__item" id="vbf6ry_79"><p>Путь (path) - составляющая полного URI запроса, не включающая host (из настроек http соединения) и параметры запроса. </p><br></li><li class="list__item" id="vbf6ry_81"><p>Метод запроса - GET или POST. </p><br></li><li class="list__item" id="vbf6ry_83"><p>HTTP заголовки - настройки заголовков HTTP. Можно добавить несколько заголовков HTTP. Слева - заголовок, справа - значение заголовка. Значением заголовка может быть текстовое значение либо строка-шаблон, содержащая переменные. Переменные задаются в формате ${имя_переменной}. Переменные позволяют формировать заголовки динамически. </p><br></li><li class="list__item" id="vbf6ry_85"><p>URL запрос - настройки параметров запроса. Можно добавить несколько параметров. Слева - заголовок, справа - значение параметра. Значением параметра может быть текстовое значение либо строка-шаблон, содержащая переменные. Переменные позволяют формировать динамические GET-запросы. </p><br></li></ol></section></section><section class="chapter"><h2 id="vbf6ry_87" data-toc="vbf6ry_87">Режим трансформации</h2><section class="chapter"><h3 id="json-pattern" data-toc="json-pattern">Json-шаблоны</h3><p id="vbf6ry_88">JSON (JavaScript Object Notation) - это легкий формат обмена данными, который широко используется для передачи структурированной информации между приложениями. В контексте IIoT-платформы, JSON-шаблоны играют ключевую роль в обмене данными с внешними системами. Вот как их создавать, использовать и примеры их применения: <br></p><ol class="list _decimal" id="vbf6ry_90" type="1"><li class="list__item" id="vbf6ry_91"><p id="vbf6ry_92">Создание JSON-шаблонов: <br>&bull; Определите структуру данных: Прежде всего, определите, какие данные вы хотите передавать или получать. Разбейте их на логические блоки или объекты. <br>&bull; Определите ключи и значения: Для каждого блока данных определите ключи и соответствующие значения. Ключи представляют собой названия атрибутов, а значения - сами данные. <br>&bull; Следуйте синтаксису JSON: Убедитесь, что ваш JSON-шаблон соответствует синтаксису JSON. Он должен состоять из пар &quot;ключ: значение&quot;, разделенных запятыми, и ограниченных фигурными скобками для объектов. <br></p></li><li class="list__item" id="vbf6ry_97"><p id="vbf6ry_98">Использование JSON-шаблонов: <br>&bull; Прием данных: Для приема данных из внешних систем, IIoT-платформа считывает JSON-шаблон, а затем обрабатывает полученные данные в соответствии с вашей логикой (скриптом). <br>&bull; Отправка данных: Для отправки данных во внешние системы, сначала сформируйте JSON-шаблон в соответствии с требованиями внешней системы, затем отправьте его через соответствующий канал связи. <br></p></li><li class="list__item" id="vbf6ry_102"><p id="vbf6ry_103">Использование различных структур данных в JSON-шаблонах. <br> Синтаксис JSON-шаблонов для IIoT-платформ может быть таким же, как и для обычных JSON-данных.</p></li></ol><p id="vbf6ry_105">В качестве значений в JSON-шаблонах могут передаваться как простые типы данных (переменные), так и массивы, и другие более сложные типы. <br></p><p id="vbf6ry_107">Примеры типов данных, которые могут быть использованы в JSON-шаблонах IIoT-платформ:</p><p id="vbf6ry_108">a) Массивы (Arrays):</p><div class="code-block" data-lang="bash">
{
   &quot;sensorData&quot;: {
      &quot;temperatures&quot;: [25.5, 26.1, 24.8],
      &quot;humidities&quot;: [60, 62, 58]
   }
}
</div><p id="vbf6ry_110">b) Объекты (Objects):</p><div class="code-block" data-lang="bash">
{
   &quot;sensorData&quot;: {
      &quot;location&quot;: {
         &quot;latitude&quot;: 40.7128,
         &quot;longitude&quot;: -74.0060
      }
   }
}
</div><p id="vbf6ry_112">c) Строки (Strings), Числа (Numbers), Логические значения (Boolean):</p><div class="code-block" data-lang="bash">
{
   &quot;equipmentStatus&quot;: {
      &quot;pump1&quot;: true,
      &quot;pump2&quot;: false,
      &quot;errorCode&quot;: 123,
      &quot;message&quot;: &quot;Pump overheating&quot;
   }
}
</div><p id="vbf6ry_114">d) Null-значения (Null):</p><div class="code-block" data-lang="bash">
{
   &quot;configuration&quot;: {
      &quot;timeout&quot;: null
   }
}
</div><p id="vbf6ry_116">e) Вложенные структуры (Nested Structures):</p><div class="code-block" data-lang="bash">
{
   &quot;productionData&quot;: {
      &quot;line1&quot;: {
         &quot;output&quot;: 500,
         &quot;defects&quot;: [&quot;Scratch&quot;, &quot;Crack&quot;]
      },
      &quot;line2&quot;: {
         &quot;output&quot;: 600,
         &quot;defects&quot;: [&quot;Chip&quot;]
      }
   }
}
</div><ol class="list _decimal" id="vbf6ry_118" type="1" start="4"><li class="list__item" id="vbf6ry_119"><p>Примеры использования JSON-шаблонов: </p><br><p> a) Пример JSON-шаблона для передачи данных о температуре и влажности с датчиков в IIoT-платформу:</p></li></ol><div class="code-block" data-lang="bash">
{
   &quot;sensorData&quot;: {
      &quot;temperature&quot;: 25.5,
      &quot;humidity&quot;: 60
   }
}
</div><p id="vbf6ry_122">b) Пример JSON-шаблона для управления устройством через IIoT-платформу:</p><div class="code-block" data-lang="bash">
{
   &quot;deviceControl&quot;: {
      &quot;deviceId&quot;: &quot;123456&quot;,
      &quot;command&quot;: &quot;on&quot;
   }
}
</div><p id="vbf6ry_124">c) Пример JSON-шаблона для получения данных о состоянии оборудования из IIoT-платформы:</p><div class="code-block" data-lang="bash">
{
   &quot;equipmentStatus&quot;: {
      &quot;pump1&quot;: &quot;running&quot;,
      &quot;pump2&quot;: &quot;stopped&quot;
   }
}
</div><p id="vbf6ry_126">d) Пример JSON-шаблона для передачи данных о производственных параметрах:</p><div class="code-block" data-lang="bash">
{
   &quot;productionData&quot;: {
      &quot;machineId&quot;: &quot;123&quot;,
      &quot;temperature&quot;: 180,
      &quot;pressure&quot;: 45,
      &quot;output&quot;: 500
   }
}
</div><p id="vbf6ry_128">e) Пример JSON-шаблона для управления режимами работы оборудования:</p><div class="code-block" data-lang="bash">
{
   &quot;equipmentControl&quot;: {
      &quot;deviceId&quot;: &quot;789&quot;,
      &quot;mode&quot;: &quot;manual&quot;,
      &quot;settings&quot;: {
         &quot;speed&quot;: 50,
         &quot;temperatureSetpoint&quot;: 200
      }
   }
}
</div><p id="vbf6ry_130">f) Пример JSON-шаблона для передачи событий и аварий:</p><div class="code-block" data-lang="bash">
{
   &quot;alarmData&quot;: {
      &quot;alarmId&quot;: &quot;ABC123&quot;,
      &quot;severity&quot;: &quot;high&quot;,
      &quot;description&quot;: &quot;Critical temperature threshold exceeded&quot;,
      &quot;timestamp&quot;: &quot;2024-05-02T10:30:00&quot;
   }
}
</div><p id="vbf6ry_132">g) Пример JSON-шаблона для запроса исторических данных:</p><div class="code-block" data-lang="bash">
{
   &quot;historicalDataRequest&quot;: {
      &quot;startDate&quot;: &quot;2024-04-01&quot;,
      &quot;endDate&quot;: &quot;2024-04-30&quot;,
      &quot;parameters&quot;: [&quot;temperature&quot;, &quot;pressure&quot;, &quot;output&quot;]
   }
}
</div><p id="vbf6ry_134">h) Пример JSON-шаблона для передачи информации о системных настройках:</p><div class="code-block" data-lang="bash">
{
   &quot;systemSettings&quot;: {
      &quot;samplingRate&quot;: 1000,
      &quot;language&quot;: &quot;en&quot;,
      &quot;timezone&quot;: &quot;UTC+3&quot;
   }
}
</div></section><section class="chapter"><h3 id="json" data-toc="json">Использование скриптов для обработки Json-шаблонов</h3><ol class="list _decimal" id="vbf6ry_136" type="1"><li class="list__item" id="vbf6ry_137"><p>Скрипт Erlang для обработки JSON-шаблонов:</p></li></ol><div class="code-block" data-lang="bash">
   -module(json_handler).
   -export([process_json/1]).
   
   % Функция для обработки JSON-шаблонов
   process_json(JsonData) -&gt;
   % Парсим JSON
   {ok, Json} = jsx:decode(JsonData),

	  % Выполняем операции в зависимости от типа данных 
	  case proplists:get_value(&lt;&lt;&quot;sensorData&quot;&gt;&gt;, Json) of 
	  	undefined -&gt; 
	  		io:format(&quot;Unknown JSON data: ~p~n&quot;, [Json]);
	  	 SensorData -&gt; 
	  		% Обрабатываем данные о датчиках 
	  		process_sensor_data(SensorData) 
	  end. 
   % Функция для обработки данных о датчиках
   process_sensor_data(SensorData) -&gt;
   Temperature = proplists:get_value(&lt;&lt;&quot;temperature&quot;&gt;&gt;, SensorData),
   Humidity = proplists:get_value(&lt;&lt;&quot;humidity&quot;&gt;&gt;, SensorData),
   io:format(&quot;Received sensor data - Temperature: ~p, Humidity: ~p~n&quot;, [Temperature, Humidity]).
</div><ol class="list _decimal" id="vbf6ry_139" type="1" start="2"><li class="list__item" id="vbf6ry_140"><p>Скрипт JavaScript для обработки JSON-шаблонов:</p></li></ol><div class="code-block" data-lang="bash">
// Функция для обработки JSON-шаблонов
function processJson(jsonData) {
   // Разбираем (&quot;парсим&quot;) JSON
   const json = JSON.parse(jsonData);

   // Выполняем операции в зависимости от типа данных
   if (json.sensorData) {
      // Обрабатываем данные о датчиках
      processSensorData(json.sensorData);
   } else {
      console.log(&quot;Unknown JSON data:&quot;, json);
   }
}

// Функция для обработки данных о датчиках
function processSensorData(sensorData) {
   const temperature = sensorData.temperature;
   const humidity = sensorData.humidity;
   console.log(`Received sensor data - Temperature: ${temperature}, Humidity: ${humidity}`);
}
</div></section><section class="chapter"><h3 id="mqtt" data-toc="mqtt">Настройка MQTT подключения</h3><p id="vbf6ry_142">MQTT (Message Queuing Telemetry Transport) - это легковесный протокол передачи сообщений, специально разработанный для передачи данных в условиях ограниченной пропускной способности и надежности сети, таких как сенсорные сети и облачные вычисления.</p><p id="vbf6ry_143">Основное назначение MQTT - обеспечить эффективную и надежную передачу данных между клиентами и брокером сообщений (MQTT-сервером), который рассылает сообщения всем подписанным клиентам.</p><p id="vbf6ry_144">Протокол MQTT работает на основе принципа &quot;издатель-подписчик&quot;, где клиенты могут публиковать сообщения в определенные темы, а другие клиенты могут подписываться на эти темы и получать опубликованные сообщения.</p><p id="vbf6ry_145">MQTT обеспечивает механизмы гарантированной доставки сообщений, управление качеством обслуживания (QoS), а также возможность работы в условиях ограниченной пропускной способности и ненадежных сетей.</p><p id="vbf6ry_146">При создании подключения типа IOT_MQTT появляется следующая форма:</p><figure id="vbf6ry_147"><a href="FPdocs/IoT5.png" class="lightbox"><img alt="Io t5" src="FPdocs/IoT5.png" class="article__bordered-element" title="Io t5" width="500" height="281"></a></figure></section><section class="chapter"><h3 id="websocket" data-toc="websocket">Настройка WebSocket подключения</h3><p id="vbf6ry_148">WebSocket - это протокол двусторонней связи поверх TCP, который позволяет устанавливать постоянное соединение между клиентом и сервером через веб-браузер или другое приложение.</p><p id="vbf6ry_149">Основное назначение WebSocket - обеспечить эффективную и низколатентную передачу данных в режиме реального времени. Он часто используется для создания интерактивных веб-приложений, онлайн-игр, чатов и стриминга мультимедийного контента.</p><p id="vbf6ry_150">Протокол WebSocket позволяет отправлять как текстовые, так и двоичные данные между клиентом и сервером, поддерживает одновременный обмен данными в обе стороны и обеспечивает механизмы контроля ошибок и переподключения.</p><p id="vbf6ry_151">При создании подключения типа IOT_WEBSOCKET_CLIENT появляется следующая форма:</p><figure id="vbf6ry_152"><a href="FPdocs/IoT6.png" class="lightbox"><img alt="Io t6" src="FPdocs/IoT6.png" class="article__bordered-element" title="Io t6" width="500" height="281"></a></figure></section></section><div class="last-modified">Last modified: 03 June 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="мастера.html" class="navigation-links__prev">Мастера</a><a href="архивы.html" class="navigation-links__next">Архивы</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script></body></html>