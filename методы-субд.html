<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-06-13T14:07:21.110666394"><title>API СУБД | Faceplate docs</title><script type="application/json" id="virtual-toc-data">[{"id":"connect","level":0,"title":"connect()","anchor":"#connect"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="API СУБД | Faceplate docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Faceplate docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/методы-субд.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="API СУБД | Faceplate docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/методы-субд.html#webpage",
    "url": "writerside-documentation/методы-субд.html",
    "name": "API СУБД | Faceplate docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Faceplate docs Help"
}</script><!-- End Schema.org --></head><body data-id="Методы-СУБД" data-main-title="API СУБД" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Ecomet-СУБД.md|Ecomet (СУБД)"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Faceplate docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Методы-СУБД" id="Методы-СУБД.md">API СУБД</h1><p id="dy1bxw_24119">Класс Ecomet предоставляет интерфейс на JavaScript для взаимодействия с СУБД Ecomet через WebSocket. Ниже приведен подробный список функций, включая описание их параметров и возвращаемых значений.</p><p id="dy1bxw_24120"><span class="control" id="dy1bxw_24121">Конструктор</span></p><ul class="list _bullet" id="dy1bxw_24122"><li class="list__item" id="dy1bxw_24123"><p><span class="control" id="dy1bxw_24124">constructor()</span> Инициализирует экземпляр класса Ecomet с начальными свойствами.</p></li></ul><p id="dy1bxw_24125"><span class="control" id="dy1bxw_24126">Методы</span></p><section class="chapter"><h2 id="connect" data-toc="connect">connect()</h2><p id="dy1bxw_24127">: метод для подключения к серверу Ecomet, используя указанные IP, порт и протокол.</p><p id="dy1bxw_24128">Синтаксис:</p><div class="code-block" data-lang="bash">
connect(IP, Port, Protocol, OnOk, OnError, OnClose)
</div><p id="dy1bxw_24130">Параметры:</p><dl id="dy1bxw_24131" data-style="title-top"><dt id="dy1bxw_24132" data-expandable="false">IP (string)</dt><dd><p id="dy1bxw_24134">IP-адрес сервера.</p></dd><dt id="dy1bxw_24135" data-expandable="false">Port (number)</dt><dd><p id="dy1bxw_24137">Номер порта сервера.</p></dd><dt id="dy1bxw_24138" data-expandable="false">Protocol (string)</dt><dd><p id="dy1bxw_24140">Протокол (например, &quot;http&quot;, &quot;https&quot;).</p></dd><dt id="dy1bxw_24141" data-expandable="false">OnOk (function)</dt><dd><p id="dy1bxw_24143">Callback-функция при успешном подключении.</p></dd><dt id="dy1bxw_24144" data-expandable="false">OnError (function)</dt><dd><p id="dy1bxw_24146">Callback-функция при ошибке подключения.</p></dd><dt id="dy1bxw_24147" data-expandable="false">OnClose (function)</dt><dd><p id="dy1bxw_24149">Callback-функция при закрытии соединения.</p></dd><dt id="dy1bxw_24150" data-expandable="false">Возвращаемое значение:</dt><dd><p id="dy1bxw_24152">нет.</p></dd></dl><p id="dy1bxw_24153">Примеры:</p><div class="code-block" data-lang="bash"></div><p id="dy1bxw_24155"><span class="control" id="dy1bxw_24156">forkConnection()</span> Создает форк (ответвление) подключения к серверу Ecomet. <span class="control" id="dy1bxw_24157">Параметры:</span> Нет <span class="control" id="dy1bxw_24158">Возвращаемое значение:</span> Promise: Обещание, которое разрешается в новый экземпляр Ecomet с активным форкнутым подключением.</p><p id="dy1bxw_24160">connectUrl(URL, OnOk, OnError, OnClose)** Подключается к серверу Ecomet, используя указанный URL. <span class="control" id="dy1bxw_24161">Параметры:</span> URL (string): WebSocket URL сервера. OnOk (function): Callback-функция при успешном подключении. OnError (function): Callback-функция при ошибке подключения. OnClose (function): Callback-функция при закрытии соединения. <span class="control" id="dy1bxw_24162">Возвращаемое значение:</span> Нет</p><p id="dy1bxw_24163"><span class="control" id="dy1bxw_24164">close()</span> Закрывает WebSocket соединение. <span class="control" id="dy1bxw_24165">Параметры:</span> Нет <span class="control" id="dy1bxw_24166">Возвращаемое значение:</span> Нет</p><p id="dy1bxw_24167"><span class="control" id="dy1bxw_24168">is_ok()</span> Проверяет, открыто ли WebSocket соединение. <span class="control" id="dy1bxw_24169">Параметры:</span> Нет <span class="control" id="dy1bxw_24170">Возвращаемое значение:</span> boolean: Возвращает true, если соединение открыто, иначе false.</p><p id="dy1bxw_24171"><span class="control" id="dy1bxw_24172">login(login, pass, OnOk, OnError, Timeout)</span> Выполняет вход в систему с указанными логином и паролем. <span class="control" id="dy1bxw_24173">Параметры:</span> login (string): Логин пользователя. pass (string): Пароль пользователя. OnOk (function): Callback-функция при успешном входе. OnError (function): Callback-функция при ошибке входа. Timeout (number): Время ожидания в миллисекундах. <span class="control" id="dy1bxw_24174">Возвращаемое значение:</span> Идентификатор действия.</p><p id="dy1bxw_24175"><span class="control" id="dy1bxw_24176">debug_applyTo(fields, oid)</span> Асинхронно применяет отладочные параметры к объекту. <span class="control" id="dy1bxw_24177">Параметры:</span> fields (object): Поля объекта. oid (string): Идентификатор объекта. <span class="control" id="dy1bxw_24178">Возвращаемое значение:</span> Promise: Обещание, которое разрешается в обновленные поля объекта.</p><ol class="list _decimal" id="dy1bxw_24180" type="1"><li class="list__item" id="dy1bxw_24181"><p><span class="control" id="dy1bxw_24182">create_object(fields, OnOk, OnError, Timeout)</span> Создает новый объект с указанными полями. </p><ol class="list _decimal" id="dy1bxw_24183" type="1"><li class="list__item" id="dy1bxw_24184"><p><span class="control" id="dy1bxw_24185">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24186" type="1"><li class="list__item" id="dy1bxw_24187"><p>fields (object): Поля нового объекта.</p></li><li class="list__item" id="dy1bxw_24188"><p>OnOk (function): Функция обратного вызова при успешном создании.</p></li><li class="list__item" id="dy1bxw_24189"><p>OnError (function): Функция обратного вызова при ошибке создания.</p></li><li class="list__item" id="dy1bxw_24190"><p>Timeout (number): Время ожидания в миллисекундах.</p></li></ol></li><li class="list__item" id="dy1bxw_24191"><p><span class="control" id="dy1bxw_24192">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24193"><p><span class="control" id="dy1bxw_24194">edit_or_create_object(fields, OnOk, OnError, Timeout)</span> Редактирует существующий или создает новый объект с указанными полями. </p><ol class="list _decimal" id="dy1bxw_24195" type="1"><li class="list__item" id="dy1bxw_24196"><p><span class="control" id="dy1bxw_24197">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24198" type="1"><li class="list__item" id="dy1bxw_24199"><p>fields (object): Поля объекта.</p></li><li class="list__item" id="dy1bxw_24200"><p>OnOk (function): Функция обратного вызова при успешной операции.</p></li><li class="list__item" id="dy1bxw_24201"><p>OnError (function): Функция обратного вызова при ошибке операции.</p></li><li class="list__item" id="dy1bxw_24202"><p>Timeout (number): Время ожидания в миллисекундах.</p></li></ol></li><li class="list__item" id="dy1bxw_24203"><p><span class="control" id="dy1bxw_24204">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24205"><p><span class="control" id="dy1bxw_24206">edit_object(oid, fields, OnOk, OnError, Timeout)</span> Редактирует существующий объект с указанными полями. </p><ol class="list _decimal" id="dy1bxw_24207" type="1"><li class="list__item" id="dy1bxw_24208"><p><span class="control" id="dy1bxw_24209">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24210" type="1"><li class="list__item" id="dy1bxw_24211"><p>oid (string): Идентификатор объекта.</p></li><li class="list__item" id="dy1bxw_24212"><p>fields (object): Новые поля объекта.</p></li><li class="list__item" id="dy1bxw_24213"><p>OnOk (function): Функция обратного вызова при успешной операции.</p></li><li class="list__item" id="dy1bxw_24214"><p>OnError (function): Функция обратного вызова при ошибке операции.</p></li><li class="list__item" id="dy1bxw_24215"><p>Timeout (number): Время ожидания в миллисекундах.</p></li></ol></li><li class="list__item" id="dy1bxw_24216"><p><span class="control" id="dy1bxw_24217">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24218"><p><span class="control" id="dy1bxw_24219">delete_object(oid, OnOk, OnError, Timeout)</span> Удаляет объект с указанным идентификатором. </p><ol class="list _decimal" id="dy1bxw_24220" type="1"><li class="list__item" id="dy1bxw_24221"><p><span class="control" id="dy1bxw_24222">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24223" type="1"><li class="list__item" id="dy1bxw_24224"><p>oid (string): Идентификатор объекта.</p></li><li class="list__item" id="dy1bxw_24225"><p>OnOk (function): Функция обратного вызова при успешной операции.</p></li><li class="list__item" id="dy1bxw_24226"><p>OnError (function): Функция обратного вызова при ошибке операции.</p></li><li class="list__item" id="dy1bxw_24227"><p>Timeout (number): Время ожидания в миллисекундах.</p></li></ol></li><li class="list__item" id="dy1bxw_24228"><p><span class="control" id="dy1bxw_24229">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24230"><p><span class="control" id="dy1bxw_24231">find(statement, OnOk, OnError, Timeout)</span> Выполняет поиск объектов по указанному SQL-запросу. </p><ol class="list _decimal" id="dy1bxw_24232" type="1"><li class="list__item" id="dy1bxw_24233"><p><span class="control" id="dy1bxw_24234">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24235" type="1"><li class="list__item" id="dy1bxw_24236"><p>statement (string): SQL-запрос для поиска.</p></li><li class="list__item" id="dy1bxw_24237"><p>OnOk (function): Функция обратного вызова при успешном выполнении запроса.</p></li><li class="list__item" id="dy1bxw_24238"><p>OnError (function): Функция обратного вызова при ошибке выполнения запроса.</p></li><li class="list__item" id="dy1bxw_24239"><p>Timeout (number): Время ожидания в миллисекундах.</p></li></ol></li><li class="list__item" id="dy1bxw_24240"><p><span class="control" id="dy1bxw_24241">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24242"><p><span class="control" id="dy1bxw_24243">query(statement, OnOk, OnError, Timeout)</span> Выполняет произвольный SQL-запрос. </p><ol class="list _decimal" id="dy1bxw_24244" type="1"><li class="list__item" id="dy1bxw_24245"><p><span class="control" id="dy1bxw_24246">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24247" type="1"><li class="list__item" id="dy1bxw_24248"><p>statement (string): SQL-запрос.</p></li><li class="list__item" id="dy1bxw_24249"><p>OnOk (function): Функция обратного вызова при успешном выполнении запроса.</p></li><li class="list__item" id="dy1bxw_24250"><p>OnError (function): Функция обратного вызова при ошибке выполнения запроса.</p></li><li class="list__item" id="dy1bxw_24251"><p>Timeout (number): Время ожидания в миллисекундах.</p></li></ol></li><li class="list__item" id="dy1bxw_24252"><p><span class="control" id="dy1bxw_24253">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24254"><p><span class="control" id="dy1bxw_24255">get(statement, OnOk, OnError, Timeout)</span> Выполняет запрос и возвращает результат в удобном формате. </p><ol class="list _decimal" id="dy1bxw_24256" type="1"><li class="list__item" id="dy1bxw_24257"><p><span class="control" id="dy1bxw_24258">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24259" type="1"><li class="list__item" id="dy1bxw_24260"><p>statement (string): SQL-запрос.</p></li><li class="list__item" id="dy1bxw_24261"><p>OnOk (function): Функция обратного вызова при успешном выполнении запроса.</p></li><li class="list__item" id="dy1bxw_24262"><p>OnError (function): Функция обратного вызова при ошибке выполнения запроса.</p></li><li class="list__item" id="dy1bxw_24263"><p>Timeout (number): Время ожидания в миллисекундах.</p></li></ol></li><li class="list__item" id="dy1bxw_24264"><p><span class="control" id="dy1bxw_24265">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24266"><p><span class="control" id="dy1bxw_24267">subscribe(statement, OnCreate, OnUpdate, OnDelete, OnError)</span> Подписывается на изменения объектов, соответствующих указанному SQL-запросу. </p><ol class="list _decimal" id="dy1bxw_24268" type="1"><li class="list__item" id="dy1bxw_24269"><p><span class="control" id="dy1bxw_24270">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24271" type="1"><li class="list__item" id="dy1bxw_24272"><p>statement (string): SQL-запрос.</p></li><li class="list__item" id="dy1bxw_24273"><p>OnCreate (function): Функция обратного вызова при создании объекта.</p></li><li class="list__item" id="dy1bxw_24274"><p>OnUpdate (function): Функция обратного вызова при обновлении объекта.</p></li><li class="list__item" id="dy1bxw_24275"><p>OnDelete (function): Функция обратного вызова при удалении объекта.</p></li><li class="list__item" id="dy1bxw_24276"><p>OnError (function): Функция обратного вызова при ошибке выполнения запроса.</p></li></ol></li><li class="list__item" id="dy1bxw_24277"><p><span class="control" id="dy1bxw_24278">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24279"><p><span class="control" id="dy1bxw_24280">unsubscribe(id, OnOk, OnError)</span> Отписывается от изменений объектов. </p><ol class="list _decimal" id="dy1bxw_24281" type="1"><li class="list__item" id="dy1bxw_24282"><p><span class="control" id="dy1bxw_24283">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24284" type="1"><li class="list__item" id="dy1bxw_24285"><p>id (number): Идентификатор подписки.</p></li><li class="list__item" id="dy1bxw_24286"><p>OnOk (function): Функция обратного вызова при успешной отписке.</p></li><li class="list__item" id="dy1bxw_24287"><p>OnError (function): Функция обратного вызова при ошибке отписки.</p></li></ol></li><li class="list__item" id="dy1bxw_24288"><p><span class="control" id="dy1bxw_24289">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24290"><p><span class="control" id="dy1bxw_24291">application(module, method, params, OnOk, OnError, Timeout)</span> Выполняет вызов функции приложения на сервере. </p><ol class="list _decimal" id="dy1bxw_24292" type="1"><li class="list__item" id="dy1bxw_24293"><p><span class="control" id="dy1bxw_24294">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24295" type="1"><li class="list__item" id="dy1bxw_24296"><p>module (string): Название модуля.</p></li><li class="list__item" id="dy1bxw_24297"><p>method (string): Название метода.</p></li><li class="list__item" id="dy1bxw_24298"><p>params (object): Параметры метода.</p></li><li class="list__item" id="dy1bxw_24299"><p>OnOk (function): Функция обратного вызова при успешном выполнении.</p></li><li class="list__item" id="dy1bxw_24300"><p>OnError (function): Функция обратного вызова при ошибке выполнения.</p></li><li class="list__item" id="dy1bxw_24301"><p>Timeout (number): Время ожидания в миллисекундах.</p></li></ol></li><li class="list__item" id="dy1bxw_24302"><p><span class="control" id="dy1bxw_24303">Возвращает:</span> Идентификатор действия.</p></li></ol></li></ol><p id="dy1bxw_24304"><span class="control" id="dy1bxw_24305">Внутренние методы</span></p><ol class="list _decimal" id="dy1bxw_24306" type="1"><li class="list__item" id="dy1bxw_24307"><p><span class="control" id="dy1bxw_24308">_action(Type, Params, OnOk, OnError, Timeout, Id)</span> Отправляет запрос на сервер. </p><ol class="list _decimal" id="dy1bxw_24309" type="1"><li class="list__item" id="dy1bxw_24310"><p><span class="control" id="dy1bxw_24311">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24312" type="1"><li class="list__item" id="dy1bxw_24313"><p>Type (string): Тип действия.</p></li><li class="list__item" id="dy1bxw_24314"><p>Params (object): Параметры действия.</p></li><li class="list__item" id="dy1bxw_24315"><p>OnOk (function): Функция обратного вызова при успешном выполнении действия.</p></li><li class="list__item" id="dy1bxw_24316"><p>OnError (function): Функция обратного вызова при ошибке выполнения действия.</p></li><li class="list__item" id="dy1bxw_24317"><p>Timeout (number): Время ожидания в миллисекундах.</p></li><li class="list__item" id="dy1bxw_24318"><p>Id (number): Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24319"><p><span class="control" id="dy1bxw_24320">Возвращает:</span> Идентификатор действия.</p></li></ol></li><li class="list__item" id="dy1bxw_24321"><p><span class="control" id="dy1bxw_24322">_on_receive(response)</span> Обрабатывает ответ от сервера. </p><ol class="list _decimal" id="dy1bxw_24323" type="1"><li class="list__item" id="dy1bxw_24324"><p><span class="control" id="dy1bxw_24325">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24326" type="1"><li class="list__item" id="dy1bxw_24327"><p>response (object): Ответ от сервера.</p></li></ol></li><li class="list__item" id="dy1bxw_24328"><p><span class="control" id="dy1bxw_24329">Возвращает:</span> Нет</p></li></ol></li></ol><p id="dy1bxw_24330"><span class="control" id="dy1bxw_24331">Статические методы</span></p><ol class="list _decimal" id="dy1bxw_24332" type="1"><li class="list__item" id="dy1bxw_24333"><p><span class="control" id="dy1bxw_24334">static to_ecomet1([Header, ...Rows], all)</span> Преобразует результаты запроса в формат Ecomet. </p><ol class="list _decimal" id="dy1bxw_24335" type="1"><li class="list__item" id="dy1bxw_24336"><p><span class="control" id="dy1bxw_24337">Параметры:</span></p><ol class="list _decimal" id="dy1bxw_24338" type="1"><li class="list__item" id="dy1bxw_24339"><p>Header (array): Заголовки полей.</p></li><li class="list__item" id="dy1bxw_24340"><p>Rows (array): Строки данных.</p></li><li class="list__item" id="dy1bxw_24341"><p>all (boolean): Флаг, указывающий, следует ли включать все поля.</p></li></ol></li><li class="list__item" id="dy1bxw_24342"><p><span class="control" id="dy1bxw_24343">Возвращает:</span> array: Преобразованные данные.</p></li></ol></li></ol></section><div class="last-modified">Last modified: 13 June 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="ecomet-субд.html" class="navigation-links__prev">Ecomet (СУБД)</a><a href="глоссарий.html" class="navigation-links__next">Глоссарий</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script></body></html>