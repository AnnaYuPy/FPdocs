<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-24T18:00:50.449216699"><title>Сервера | Faceplate docs</title><script type="application/json" id="virtual-toc-data">[{"id":"-gnz8hp_6","level":0,"title":"Панель управления","anchor":"#-gnz8hp_6"},{"id":"-gnz8hp_7","level":0,"title":"Мониторинг состояния серверов","anchor":"#-gnz8hp_7"},{"id":"-gnz8hp_8","level":0,"title":"Добавление нового сервера","anchor":"#-gnz8hp_8"},{"id":"-gnz8hp_9","level":0,"title":"Возможные проблемы","anchor":"#-gnz8hp_9"},{"id":"-gnz8hp_10","level":0,"title":"Назначение нового мастера","anchor":"#-gnz8hp_10"},{"id":"run-time","level":0,"title":"Запуск/Останов проекта в RUN-TIME","anchor":"#run-time"},{"id":"-gnz8hp_12","level":0,"title":"Обеспечение надежной интеграции и оптимизация работы серверов","anchor":"#-gnz8hp_12"},{"id":"faceplate","level":0,"title":"Резервирование в Faceplate","anchor":"#faceplate"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Сервера | Faceplate docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Faceplate docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/сервера.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Сервера | Faceplate docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/сервера.html#webpage",
    "url": "writerside-documentation/сервера.html",
    "name": "Сервера | Faceplate docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Faceplate docs Help"
}</script><!-- End Schema.org --></head><body data-id="Сервера" data-main-title="Сервера" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Faceplate-Tutorial.md|Faceplate Studio"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Faceplate docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Сервера" id="Сервера.md">Сервера</h1><p id="-gnz8hp_3">На вкладке &ldquo;Сервера&rdquo; располагается одноимённый редактор, который предназначен для мониторинга состояний <a href="глоссарий.html" id="-gnz8hp_14" data-tooltip="механизм, который предназначен для хранения исторических данных о параметрах и событиях, собранных и записанных в системе. Формируемая история изменения параметров может быть использована для анализа контролируемого процесса и может быть представлена оператору в виде графиков и…">серверов</a> (узлов) системы, для их запуска/останова в режиме RUN-TIME, удаления, переключения мастера, просмотра сообщений о событиях на сервере, запуска команд ECOMET.</p><p id="-gnz8hp_4">Панель редактора имеет следующий вид:</p><figure id="-gnz8hp_5"><a href="FPdocs/Servers.1.png" class="lightbox"><img alt="Servers 1" src="FPdocs/Servers.1.png" class="article__bordered-element" title="Servers 1" width="700" height="373"></a></figure><section class="chapter"><h2 id="-gnz8hp_6" data-toc="-gnz8hp_6">Панель управления</h2><p id="-gnz8hp_15">В верхней части редактора расположена панель управления:</p><figure id="-gnz8hp_16"><a href="FPdocs/Servers.2.png" class="lightbox"><img alt="Servers 2" src="FPdocs/Servers.2.png" class="article__bordered-element" title="Servers 2" width="700" height="26"></a></figure><p id="-gnz8hp_17">На панели управления серверами есть несколько элементов:</p><div class="table-wrapper"><table class="wide" id="-gnz8hp_18"><thead><tr class="ijRowHead" id="-gnz8hp_19"><th id="-gnz8hp_25"><p>Элемент</p></th><th id="-gnz8hp_26"><p>Описание</p></th></tr></thead><tbody><tr id="-gnz8hp_20"><td id="-gnz8hp_27"><p><img alt="Servers 2 1" src="FPdocs/Servers.2.1.png" class="inline-icon-" title="Servers 2 1" id="-gnz8hp_29" width="70" height="22"></p></td><td id="-gnz8hp_28"><p>Элемент отражает текущее состояние режима RUN-TIME. Имеет 2 значения RUN/STOP.</p></td></tr><tr id="-gnz8hp_21"><td id="-gnz8hp_30"><figure id="-gnz8hp_32"><img alt="Servers 2 2" src="FPdocs/Servers.2.2.png" title="Servers 2 2" width="70" height="35"></figure></td><td id="-gnz8hp_31"><p>Кнопка запуска/останова проекта в режиме RUN-TIME. Может быть в 2-х состояниях STOP/RUN.</p></td></tr><tr id="-gnz8hp_22"><td id="-gnz8hp_33"><p><img alt="Servers 2 3" src="FPdocs/Servers.2.3.png" class="inline-icon-" title="Servers 2 3" id="-gnz8hp_35" width="150" height="23"></p></td><td id="-gnz8hp_34"><p>Элемент, который отражает имя сервера, к которому на данный момент подключен браузер. Имеет следующий формат: fp@&lt;имя хоста&gt;. Имя хоста задается в процессе установки Faceplate на сервер.</p></td></tr><tr id="-gnz8hp_23"><td id="-gnz8hp_36"><p><img alt="Servers 2 4" src="FPdocs/Servers.2.4.png" class="inline-icon-" title="Servers 2 4" id="-gnz8hp_38" width="150" height="18"></p></td><td id="-gnz8hp_37"><p>Элемент отражает текущее время на сервере.</p></td></tr><tr id="-gnz8hp_24"><td id="-gnz8hp_39"><figure id="-gnz8hp_41"><img alt="Servers 2 5" src="FPdocs/Servers.2.5.png" title="Servers 2 5" width="200" height="37"></figure></td><td id="-gnz8hp_40"><p>Кнопка позволяет назначить/переключить мастер-сервер. Надпись на кнопке отображает имя мастер-сервера в текущий момент.</p></td></tr></tbody></table></div></section><section class="chapter"><h2 id="-gnz8hp_7" data-toc="-gnz8hp_7">Мониторинг состояния серверов</h2><p id="-gnz8hp_42">Для каждого сконфигурированного сервера выводится информация о его текущем состоянии. Информация выводится в карточках серверов, которые обновляются каждые 5 секунд.</p><p id="-gnz8hp_43">Карточка сервера выглядит следующим образом:</p><figure id="-gnz8hp_44"><a href="FPdocs/Servers.3.png" class="lightbox"><img alt="Servers 3" src="FPdocs/Servers.3.png" class="article__bordered-element" title="Servers 3" width="700" height="310"></a></figure><p id="-gnz8hp_45">Каждая карточка состоит из 3-х областей:</p><ul class="list _bullet" id="-gnz8hp_46"><li class="list__item" id="-gnz8hp_52"><p id="-gnz8hp_55">заголовок с именем и IP-адресом сервера,</p></li><li class="list__item" id="-gnz8hp_53"><p id="-gnz8hp_56">системная информация о сервере,</p></li><li class="list__item" id="-gnz8hp_54"><p id="-gnz8hp_57">консоль, отражающая события, происходящие на сервере, в хронологическом порядке (логи), и строки для ввода команд СУБД ECOMET.</p></li></ul><div class="table-wrapper"><table class="wide" id="-gnz8hp_47"><thead><tr class="ijRowHead" id="-gnz8hp_58"><th id="-gnz8hp_69"><p>Элемент карточки</p></th><th id="-gnz8hp_70"><p>Описание</p></th></tr></thead><tbody><tr id="-gnz8hp_59"><td id="-gnz8hp_71"><p><img alt="Servers 3 1" src="FPdocs/Servers.3.1.png" class="inline-icon-" title="Servers 3 1" id="-gnz8hp_73" width="200" height="21"></p></td><td id="-gnz8hp_72"><p>Имя сервера и его IP-адрес. Если иконка (показывает статус узла) зеленого цвета <img alt="Servers 3 1 2" src="FPdocs/Servers.3.1.2.png" class="inline-icon-" title="Servers 3 1 2" id="-gnz8hp_74" width="20" height="20">, значит сервер подключен, активен, вся необходимая информация скопирована, и сервер может принять роль мастера. В противном случае иконка <img alt="Servers 3 1 1" src="FPdocs/Servers.3.1.1.png" class="inline-icon-" title="Servers 3 1 1" id="-gnz8hp_75" width="20" height="19">.</p></td></tr><tr id="-gnz8hp_60"><td id="-gnz8hp_76"><p><img alt="Servers 3 2" src="FPdocs/Servers.3.2.png" class="inline-icon-" title="Servers 3 2" id="-gnz8hp_78" width="200" height="15"></p></td><td id="-gnz8hp_77"><p>Текущее время на сервере.</p></td></tr><tr id="-gnz8hp_61"><td id="-gnz8hp_79"><p><img alt="Servers 3 3" src="FPdocs/Servers.3.3.png" class="inline-icon-" title="Servers 3 3" id="-gnz8hp_81" width="200" height="15"></p></td><td id="-gnz8hp_80"><p>Объем занятой и доступной оперативной памяти.</p></td></tr><tr id="-gnz8hp_62"><td id="-gnz8hp_82"><figure id="-gnz8hp_84"><img alt="Servers 3 4" src="FPdocs/Servers.3.4.png" title="Servers 3 4" width="200" height="38"></figure></td><td id="-gnz8hp_83"><p>Процент использования ЦПУ. Для узлов работающих под управлением ОС Linux процент рассчитывается по формуле: Load_% = 100 * (1 - Factor / (Factor +Load_rup)), где Load_% - рассчитанный процент использования ЦПУ, Load_rup - среднее количество времени, проводимое процессами в очереди ожидания, Factor - корректирующий фактор. Время ожидания процессами своей очереди является косвенным показателем оценки нагрузки на ЦПУ. Для перевода этого параметра в % необходимо учитывать мощность и конфигурацию процессора. Это выполняется через подстройку корректирующего фактора. Более подробную информацию можно найти по ссылке <a href="https://linux.die.net/man/3/cpu_sup" id="-gnz8hp_85" data-external="true" rel="noopener noreferrer" target="_blank">https://linux.die.net/man/3/cpu_sup</a>. <br> Для узлов работающих под управлением Windows корректирующий фактор не участвует в расчете нагрузки на ЦПУ.</p></td></tr><tr id="-gnz8hp_63"><td id="-gnz8hp_87"><p><img alt="Servers 3 5" src="FPdocs/Servers.3.5.png" class="inline-icon-" title="Servers 3 5" id="-gnz8hp_89" width="200" height="26"></p></td><td id="-gnz8hp_88"><p>Количество активных сессий на данном узле. Соответствует количеству подключений. Среда исполнения использует 2 постоянных подключения и по одному динамическому подключению на каждое формирование отчета. Это означает что при открытии в браузере среды исполнения на узле появляются 2 новые сессии, а во время формирования отчета появляется еще одна сессия. По щелчку на кнопке с количеством сессий открывается окно, содержащее информацию по открытым сессиям: <br>* пользователь под которым выполнено подключение; <br>* время открытия соединения; <br>* доп. информация по подключению.</p></td></tr><tr id="-gnz8hp_64"><td id="-gnz8hp_93"><figure id="-gnz8hp_95"><img alt="Servers 3 6" src="FPdocs/Servers.3.6.png" title="Servers 3 6" width="200" height="35"></figure></td><td id="-gnz8hp_94"><p>??????????????????????????????</p></td></tr><tr id="-gnz8hp_65"><td id="-gnz8hp_96"><figure id="-gnz8hp_98"><img alt="Servers 3 7" src="FPdocs/Servers.3.7.png" title="Servers 3 7" width="150" height="38"></figure></td><td id="-gnz8hp_97"><p>Информация об установленной на сервере лицензии.</p></td></tr><tr id="-gnz8hp_66"><td id="-gnz8hp_99"><figure id="-gnz8hp_101"><img alt="Servers 3 8" src="FPdocs/Servers.3.8.png" title="Servers 3 8" width="150" height="38"></figure></td><td id="-gnz8hp_100"><p>Доменное имя сервера</p></td></tr><tr id="-gnz8hp_67"><td id="-gnz8hp_102"><figure id="-gnz8hp_104"><img alt="Servers 3 9" src="FPdocs/Servers.3.9.png" title="Servers 3 9" width="200" height="89"></figure></td><td id="-gnz8hp_103"><p>Информация о директориях на сервере. По каждой директории отображается: <br>* Процент заполнения <br>* Объем занятого пространства <br>* Объем доступного пространства</p></td></tr><tr id="-gnz8hp_68"><td id="-gnz8hp_108"><figure id="-gnz8hp_110"><img alt="Servers 3 10" src="FPdocs/Servers.3.10.png" title="Servers 3 10" width="30" height="34"></figure></td><td id="-gnz8hp_109"><p>Кнопка удаления сервера. Перед удалением сервер должен быть остановлен и отключен. На текущем сервере эта кнопка всегда неактивна.</p></td></tr></tbody></table></div><p id="-gnz8hp_48">На консоле можно просмотреть логи согласно фильтрам посиковой строки: <figure id="-gnz8hp_111"><a href="FPdocs/Servers.4.1.png" class="lightbox"><img alt="Servers 4 1" src="FPdocs/Servers.4.1.png" class="article__bordered-element" title="Servers 4 1" width="700" height="65"></a></figure> и запустить на выполнение команды для ECOMET: <figure id="-gnz8hp_112"><a href="FPdocs/Servers.4.2.png" class="lightbox"><img alt="Servers 4 2" src="FPdocs/Servers.4.2.png" class="article__bordered-element" title="Servers 4 2" width="700" height="68"></a></figure> где</p><div class="table-wrapper"><table class="wide" id="-gnz8hp_49"><thead><tr class="ijRowHead" id="-gnz8hp_113"><th id="-gnz8hp_121"><p>Элемент</p></th><th id="-gnz8hp_122"><p>Описание</p></th></tr></thead><tbody><tr id="-gnz8hp_114"><td id="-gnz8hp_123"><figure id="-gnz8hp_125"><img alt="Servers 4 3" src="FPdocs/Servers.4.3.png" title="Servers 4 3" width="200" height="47"></figure></td><td id="-gnz8hp_124"><p>Фильтр выбора даты, для которой нужно отразить записи о событиях на сервере.</p></td></tr><tr id="-gnz8hp_115"><td id="-gnz8hp_126"><figure id="-gnz8hp_128"><img alt="Servers 4 4" src="FPdocs/Servers.4.4.png" title="Servers 4 4" width="150" height="177"></figure></td><td id="-gnz8hp_127"><p>Фильтр количества записей за выбранную дату????????????????</p></td></tr><tr id="-gnz8hp_116"><td id="-gnz8hp_129"><figure id="-gnz8hp_131"><img alt="Servers 4 5" src="FPdocs/Servers.4.5.png" title="Servers 4 5" width="150" height="213"></figure></td><td id="-gnz8hp_130"><p>Фильтр типа события, для которого нужно вывести сообщения.</p></td></tr><tr id="-gnz8hp_117"><td id="-gnz8hp_132"><p><img alt="Servers 4 6" src="FPdocs/Servers.4.6.png" class="inline-icon-" title="Servers 4 6" id="-gnz8hp_134" width="70" height="26"></p></td><td id="-gnz8hp_133"><p>Кнопка для отражения сообщений с выбранными фильтрами.</p></td></tr><tr id="-gnz8hp_118"><td id="-gnz8hp_135"><p><img alt="Servers 4 7" src="FPdocs/Servers.4.7.png" class="inline-icon-" title="Servers 4 7" id="-gnz8hp_137" width="200" height="21"></p></td><td id="-gnz8hp_136"><p>Установка частоты обновлений: без обновлений, каждые 5, 10, 60 секунд или в режиме реального времени.</p></td></tr><tr id="-gnz8hp_119"><td id="-gnz8hp_138"><p><img alt="Servers 4 8" src="FPdocs/Servers.4.8.png" class="inline-icon-" title="Servers 4 8" id="-gnz8hp_140" width="30" height="31"></p></td><td id="-gnz8hp_139"><p>Кнопка сброса фильтров в состояние по умолчанию.</p></td></tr><tr id="-gnz8hp_120"><td id="-gnz8hp_141"><p><img alt="Servers 4 9" src="FPdocs/Servers.4.9.png" class="inline-icon-" title="Servers 4 9" id="-gnz8hp_143" width="200" height="20"></p></td><td id="-gnz8hp_142"><p>Строка терминала для запуска команд в ECOMET.</p></td></tr></tbody></table></div><p id="-gnz8hp_50">Внизу панели серверов находится список подключенных серверов, с возможностью просмотра их карточек:</p><figure id="-gnz8hp_51"><a href="FPdocs/Servers.4.10.png" class="lightbox"><img alt="Servers 4 10" src="FPdocs/Servers.4.10.png" class="article__bordered-element" title="Servers 4 10" width="700" height="141"></a></figure></section><section class="chapter"><h2 id="-gnz8hp_8" data-toc="-gnz8hp_8">Добавление нового сервера</h2><p id="-gnz8hp_144">Для добавления к системе нового сервера нужно:</p><ol class="list _decimal" id="-gnz8hp_145" type="1"><li class="list__item" id="-gnz8hp_148"><p id="-gnz8hp_151">Подготовить физический сервер, установив на нем Faceplate.</p></li><li class="list__item" id="-gnz8hp_149"><p id="-gnz8hp_152">Запустить приложение Faceplate на новом сервере. При первом запуске Faceplate на резервном сервере приложение ждет пока мастер-сервер подключится и скопирует на него необходимые данные.</p></li><li class="list__item" id="-gnz8hp_150"><p id="-gnz8hp_153">В редакторе серверов на действующем проекте щелкнуть по кнопке &ldquo;Добавить&rdquo; на панели управления и задать имя узла для добавляемого сервера. Имя узла имеет следующий формат: fp@&lt;имя хоста&gt;. Имя хоста должно совпадать с именем, определенным в процессе установки.</p></li></ol><p id="-gnz8hp_146">В результате появится карточка нового сервера и мастер-сервер начнет копирование необходимой информации на новый сервер. Когда копирование будет завершено иконка добавленного сервера станет зеленого цвета, это означает что сервер в работе и готов принять роль мастера.</p><aside class="prompt" data-type="note" data-title="" id="-gnz8hp_147"><p id="-gnz8hp_154"><span class="control" id="-gnz8hp_156">ВНИМАНИЕ!</span></p><p id="-gnz8hp_155">Все действия могут выполняться на рабочей системе, без необходимости останова RUN-TIME.</p></aside></section><section class="chapter"><h2 id="-gnz8hp_9" data-toc="-gnz8hp_9">Возможные проблемы</h2><p id="-gnz8hp_157">Если при добавлении сервера к системе в его карточке флаг состояния connected остается false, необходимо убедиться, что</p><ul class="list _bullet" id="-gnz8hp_158"><li class="list__item" id="-gnz8hp_160"><p id="-gnz8hp_163">доменное имя для нового сервера совпадает с именем хоста в имени узла сервера. Имя узла задается при установке Faceplate.</p></li><li class="list__item" id="-gnz8hp_161"><p id="-gnz8hp_164">новый сервер доступен с мастер-сервера. Для этого можно воспользоваться командой ping. При пинговании нужно использовать доменное имя (имя хоста).</p></li><li class="list__item" id="-gnz8hp_162"><p id="-gnz8hp_165">на новом сервере открыт порт 4369. Для этого можно воспользоваться утилитой telnet.</p></li></ul><p id="-gnz8hp_159">Если проблема не устранена нужно перезагрузить новый сервер и повторно запустить Faceplate.</p></section><section class="chapter"><h2 id="-gnz8hp_10" data-toc="-gnz8hp_10">Назначение нового мастера</h2><p id="-gnz8hp_166">Сервер, выполняющий роль мастера, обеспечивает работу режима RUN-TIME. Мастер выполняет опрос контроллерного оборудования, обеспечивает ведение архивов и работу системы сообщений. Если для системы настроено горячее резервирование, то роль мастера могут принимать на себя сервера, находящиеся в режиме stand-by. Передача роли мастера между серверами выполняется при отказе сервера, выполняющего роль мастера, или при явном задании нового мастера в редакторе серверов.</p><p id="-gnz8hp_167">Для передачи роли мастера другому серверу нужно щелкнуть по кнопке выбора мастера на панели управления:</p><p> <img alt="Servers 2 5" src="FPdocs/Servers.2.5.png" class="inline-icon-" title="Servers 2 5" id="-gnz8hp_168" width="150" height="28"></p><p id="-gnz8hp_169">Будет выведен список серверов, готовых принять роль мастера.</p><p id="-gnz8hp_170">Если ни один из серверов не готов принять роль мастера, будет выведено сообщение:</p><figure id="-gnz8hp_171"><img alt="Servers 2 6" src="FPdocs/Servers.2.6.png" title="Servers 2 6" width="356" height="139"></figure></section><section class="chapter"><h2 id="run-time" data-toc="run-time">Запуск/Останов проекта в RUN-TIME</h2><p id="-gnz8hp_172">В режиме RUN-TIME на сервере, выполняющем роль мастера, работают процессы обеспечивающие опрос контроллерного оборудования, ведение архивов, работу системы сообщений и ряд других процессов, обеспечивающих управление объектом. При выходе из режима RUN-TIME перечисленные процессы завершаются и система перестает выполнять функции по управлению объектом - переходит в режим STOP. Среда разработки проекта функционирует независимо от состояния режима RUN-TIME.</p><p id="-gnz8hp_173">Для запуска проекта в RUN-TIME нужно щелкнуть по кнопке &ldquo;RUN&rdquo; на панели управления:</p><figure id="-gnz8hp_174"><img alt="Servers 2 7" src="FPdocs/Servers.2.7.png" title="Servers 2 7" width="127" height="36"></figure><p id="-gnz8hp_175">В результате будет на мастер-сервере будет выполнен запуск процессов, обеспечивающих управление объектом, после чего кнопка приобретет следующий вид:</p><p id="-gnz8hp_176">Для выхода из режима RUN-TIME нужно щелкнуть по кнопке STOP.</p><figure id="-gnz8hp_177"><img alt="Servers 2 8" src="FPdocs/Servers.2.8.png" title="Servers 2 8" width="129" height="33"></figure></section><section class="chapter"><h2 id="-gnz8hp_12" data-toc="-gnz8hp_12">Обеспечение надежной интеграции и оптимизация работы серверов</h2><p id="-gnz8hp_178">Для обеспечения надежного и эффективного функционирования системы можно использовать переменную окружения ATTACH_TO, которая используется для управления процессом подключения виртуальной машины Erlang (VM) одного сервера к виртуальной машине другого. Это может быть полезно для:</p><ul class="list _bullet" id="-gnz8hp_179"><li class="list__item" id="-gnz8hp_191"><p id="-gnz8hp_196"><b id="-gnz8hp_197">резервного копирования и восстановления:</b> переменная окружения ATTACH_TO может использоваться для подключения резервного сервера к основному серверу, для периодического создания резервных копий данных одного сервера и их последующем восстановлении на другом сервере в случае сбоя или отказа первого сервера;</p></li><li class="list__item" id="-gnz8hp_192"><p id="-gnz8hp_198"><b id="-gnz8hp_199">масштабирования и распределения нагрузки:</b> в больших Iot-платформах, таких как Faceplate, может потребоваться распределение нагрузки между несколькими серверами для обеспечения высокой производительности и отказоустойчивости. Переменная окружения ATTACH_TO может быть использована для присоединения дополнительных серверов к основному серверу и распределения части нагрузки между ними;</p></li><li class="list__item" id="-gnz8hp_193"><p id="-gnz8hp_200"><b id="-gnz8hp_201">горячего резервирования серверов:</b> переменная окружения ATTACH_TO в IoT-платформе может использоваться как часть механизма горячего резервирования, позволяя быстро и эффективно переключаться с основного сервера на резервный сервер в случае необходимости;</p></li><li class="list__item" id="-gnz8hp_194"><p id="-gnz8hp_202"><b id="-gnz8hp_203">географической репликации данных:</b> для обеспечения отказоустойчивости и защиты от потери данных в случае катастрофы или отказа оборудования может использоваться географическая репликация данных между серверами, находящимися в разных географических точках. Переменная окружения ATTACH_TO может быть использована для присоединения удаленного сервера к локальному серверу и синхронизации данных между ними;</p></li><li class="list__item" id="-gnz8hp_195"><p id="-gnz8hp_204"><b id="-gnz8hp_205">автоматического обновления конфигурации и программного обеспечения:</b> переменная окружения ATTACH_TO может быть использована для автоматического обновления конфигурации и программного обеспечения на сервере, например, при развертывании новой версии IoT-платформы или ее компонентов. Это позволяет обновлять серверы без простоя системы и минимизировать риск возникновения ошибок при ручном обновлении.</p></li></ul><p id="-gnz8hp_180"><b id="-gnz8hp_206">Пример 1.</b> Настройка для прикрепления (ATTACH_TO) одного сервера к другому:</p><ol class="list _decimal" id="-gnz8hp_181" type="1"><li class="list__item" id="-gnz8hp_207"><p id="-gnz8hp_209">Дать имена серверам. Допустим, мы назовем их &quot;master.fp&quot; и &quot;slave.fp&quot;.</p></li><li class="list__item" id="-gnz8hp_208"><p id="-gnz8hp_210">Указать адреса серверов для каждой из них. Для этого нужно выполнить команду:</p></li></ol><div class="code-block" data-lang="bash">
      nano /etc/hosts
</div><p id="-gnz8hp_183">Например, адреса могут быть следующие:</p><div class="code-block" data-lang="bash">
192.168.1.78 master.fp
192.168.1.92 slave.fp
</div><ol class="list _decimal" id="-gnz8hp_185" type="1" start="3"><li class="list__item" id="-gnz8hp_211"><p id="-gnz8hp_212">Далее нужно запустить мастер-сервер через терминал виртуальной машины Erlang командой:</p></li></ol><div class="code-block" data-lang="bash">
      ./test_shell
</div><ol class="list _decimal" id="-gnz8hp_187" type="1" start="4"><li class="list__item" id="-gnz8hp_213"><p id="-gnz8hp_214">А также запустить слэйв-сервер командой, где в переменной окружения указано имя сервера, к которому будет прикреплен вновь запущенный:</p></li></ol><div class="code-block" data-lang="bash">
      env ATTACH_TO=fp@master.fp ./test_shell
</div><p id="-gnz8hp_189">Это завершит настройку. Для настройки резервирования необходимо проделать то же самое, а также:</p><ol class="list _decimal" id="-gnz8hp_190" type="1" start="5"><li class="list__item" id="-gnz8hp_215"><p id="-gnz8hp_216">В редакторе базы данных добавить запись для слэйв-сервера.</p><figure id="-gnz8hp_217"><a href="FPdocs/Servers.5.png" class="lightbox"><img alt="Servers 5" src="FPdocs/Servers.5.png" class="article__bordered-element" title="Servers 5" width="700" height="402"></a></figure></li></ol></section><section class="chapter"><h2 id="faceplate" data-toc="faceplate">Резервирование в Faceplate</h2><p id="-gnz8hp_218">В Faceplate вместо традиционного горячего резервирования, где один сервер ожидает сбоя основного, была реализована распределенная отказоустойчивая система. Здесь все сервера активно участвуют в процессе, с мастер-сервером, который координирует их деятельность. Каждый сервер выполняет определенные задачи и хранит часть базы данных.</p><p id="-gnz8hp_219">В случае сбоя одного из серверов, наименее загруженный сервер берет на себя его функции. Это позволяет системе оставаться доступной даже при отказе отдельных компонентов. Однако, в угоду доступности может быть нарушена согласованность данных (consistency), так как не все сервера будут обновлены одновременно, и часть данных может оказаться устаревшей на некоторое время или даже потерянной.</p><p id="-gnz8hp_220">Эту архитектуру можно понять, если вспомнить основные принципы CAP-теоремы из теории информации:</p><ul class="list _bullet" id="-gnz8hp_221"><li class="list__item" id="-gnz8hp_234"><p id="-gnz8hp_237"><b id="-gnz8hp_238">Availability (Доступность):</b> Этот принцип подчеркивает важность того, чтобы система была доступна для пользователей в любое время, даже при наличии сбоев. В случае распределенной отказоустойчивой системы, все серверы активно участвуют и могут взять на себя функции упавшего сервера, обеспечивая бесперебойную работу системы.</p></li><li class="list__item" id="-gnz8hp_235"><p id="-gnz8hp_239"><b id="-gnz8hp_240">Consistency (Согласованность):</b> Этот принцип означает, что данные в системе должны быть согласованными и корректными в любой момент времени. Однако, в распределенных системах, где акцент делается на доступность, могут возникать временные различия в данных между серверами из-за асинхронной синхронизации или задержек в обновлении.</p></li><li class="list__item" id="-gnz8hp_236"><p id="-gnz8hp_241"><b id="-gnz8hp_242">Partition tolerance (Устойчивость к разделению):</b> Этот принцип указывает на способность системы функционировать даже в случае разделения на части или сетевых сбоев между компонентами. В распределенной отказоустойчивой системе, разделенные серверы могут продолжать работать независимо друг от друга, что обеспечивает высокую устойчивость к разделению.</p></li></ul><p id="-gnz8hp_222">В Faceplate предпочтение отдается доступности (availability) в ущерб согласованности (consistency). Это означает, что система стремится оставаться доступной для пользователей даже при возникновении сбоев, но при этом может временно допускать несогласованность данных между серверами.</p><p id="-gnz8hp_223">Такой подход важен для критических систем, где непрерывная доступность играет решающую роль, например, в системах управления промышленным оборудованием или энергетическими сетями. Обычно в таких системах быстрый отклик и минимизация простоев критически важны.</p><p id="-gnz8hp_224">Можно рассмотреть несколько примеров использования распределенных отказоустойчивых систем:</p><p id="-gnz8hp_225"><b id="-gnz8hp_243">Пример 1.</b> Представим себе распределенную систему управления энергетическими сетями, где различные подстанции оборудованы серверами для мониторинга и управления работой. Каждый сервер отвечает за сбор данных о производстве и потреблении энергии, а также за принятие решений о распределении нагрузки и обеспечении стабильности сети.</p><p id="-gnz8hp_226">Если одна из подстанций перестает отвечать из-за сбоя или перегрузки, другие серверы могут автоматически принять на себя ее функции, чтобы обеспечить непрерывную работу энергетической сети. Например, серверы могут динамически перераспределять нагрузку между собой, чтобы компенсировать отказавший сервер и обеспечить стабильное энергоснабжение.</p><p id="-gnz8hp_227">Однако, во время переходного периода, когда один сервер перестает работать, возможно некоторое несоответствие в данных о текущем состоянии энергетической сети между различными серверами. Это может привести к временным несогласованностям в информации о производстве и потреблении энергии, а также о статусе оборудования и состоянии сети.</p><p id="-gnz8hp_228">Тем не менее, важно, чтобы энергетическая сеть оставалась доступной и способной обеспечивать энергоснабжение даже в условиях сбоев или нагрузки. Поэтому в таких ситуациях отдается приоритет доступности данных в ущерб полной согласованности между серверами.</p><p id="-gnz8hp_229"><b id="-gnz8hp_244">Пример 2.</b> Рассмотрим медицинскую информационную систему, в которой различные серверы хранят данные о медицинской истории пациентов, результаты анализов, назначения врачей и другую важную информацию. Когда один из серверов становится недоступным из-за сбоя или перегрузки, другие серверы автоматически принимают на себя его функции, чтобы обеспечить доступность информации для медицинского персонала и обеспечить непрерывное оказание медицинских услуг.</p><p id="-gnz8hp_230">Во время такого переходного периода может возникнуть некоторое несоответствие в данных между различными серверами. Например, информация о последних анализах или назначениях может быть обновлена на одном сервере, но еще не синхронизирована с другими серверами. Это может привести к временным несогласованностям в медицинской информации и небольшим задержкам в доступе к обновленным данным.</p><p id="-gnz8hp_231">Однако, важно, чтобы медицинские информационные системы оставались доступными и способными предоставлять информацию о пациентах даже в условиях сбоев или перегрузки. Поэтому в таких ситуациях отдается приоритет доступности данных в ущерб полной согласованности между серверами. Это позволяет медицинскому персоналу продолжать обслуживать пациентов и принимать необходимые медицинские решения, несмотря на временные различия в информации между серверами.</p><p id="-gnz8hp_232"><b id="-gnz8hp_245">Пример 3.</b> Проанализируем финансовую торговую платформу, на которой размещены серверы для обработки и выполнения торговых операций, мониторинга цен и обновления информации о финансовых инструментах. Когда один из серверов становится недоступным из-за сбоя или перегрузки, другие серверы автоматически принимают на себя его функции, чтобы обеспечить доступность для трейдеров и непрерывное проведение торгов.</p><p id="-gnz8hp_233">В переходный период возможно некоторое несоответствие в данных между различными серверами. Например, информация о текущих ценах или статусе торговых заявок может быть обновлена на одном сервере, но еще не синхронизирована с другими серверами. Это может привести к временным несогласованностям в информации о рынке и небольшим задержкам в выполнении торговых операций. Однако, важно, чтобы финансовая торговая платформа оставалась доступной и способной проводить торговые операции даже в условиях сбоев или перегрузки. Поэтому в таких ситуациях отдается приоритет доступности данных в ущерб полной согласованности между серверами. Это позволяет трейдерам продолжать торговлю и реагировать на изменения на рынке, несмотря на временные различия в информации между серверами.</p></section><div class="last-modified">23 May 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="права.html" class="navigation-links__prev">Права</a><a href="видео.html" class="navigation-links__next">Видео</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>