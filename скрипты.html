<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-25T12:53:48.988056933"><title>Скрипты | Faceplate docs</title><script type="application/json" id="virtual-toc-data">[{"id":"-290jcl_3","level":0,"title":"Общие рекомендации по написанию скриптов","anchor":"#-290jcl_3"},{"id":"faceplate-studio","level":0,"title":"Основные возможности скриптов в Faceplate Studio","anchor":"#faceplate-studio"},{"id":"-290jcl_5","level":0,"title":"Базовая структура скрипта поведения","anchor":"#-290jcl_5"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Скрипты | Faceplate docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Faceplate docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/скрипты.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Скрипты | Faceplate docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/скрипты.html#webpage",
    "url": "writerside-documentation/скрипты.html",
    "name": "Скрипты | Faceplate docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Faceplate docs Help"
}</script><!-- End Schema.org --></head><body data-id="Скрипты" data-main-title="Скрипты" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Faceplate-Tutorial.md|Faceplate Studio"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Faceplate docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Скрипты" id="Скрипты.md">Скрипты</h1><section class="chapter"><h2 id="-290jcl_3" data-toc="-290jcl_3"><a name=""></a><span class="control" id="-290jcl_9">Общие рекомендации по написанию скриптов</span></h2><ul class="list _bullet" id="-290jcl_7"><li class="list__item" id="-290jcl_10"><p id="-290jcl_13"><span class="control" id="-290jcl_14">Логирование и обработка ошибок</span>: Используйте макросы ?LOGINFO, ?LOGWARNING и ?LOGERROR для логирования информации и обработки ошибок (файл console.log). Для логирования в самом журнале сообщений используйте макросы ? FP_LOGINFO, ? FP_LOGWARNING и ? FP_LOGERROR.</p></li><li class="list__item" id="-290jcl_11"><p id="-290jcl_15"><span class="control" id="-290jcl_16">Отладка и тестирование</span>: После написания скрипта необходимо провести компиляцию. В случае успешного выполнения появится сообщение &ldquo;ok&rdquo;; в противном случае будут указаны ошибки.</p></li><li class="list__item" id="-290jcl_12"><p id="-290jcl_17"><span class="control" id="-290jcl_18">Привязка скриптов</span>: Привязывайте скрипты к конкретным объектам или параметрам для автоматической обработки данных или выполнения операций на основе триггеров.</p></li></ul></section><section class="chapter"><h2 id="faceplate-studio" data-toc="faceplate-studio"><span class="control" id="-290jcl_23">Основные возможности скриптов в Faceplate Studio</span></h2><p id="-290jcl_20">Скрипты можно разделить на несколько типов в зависимости от их сложности и области применения:</p><ul class="list _bullet" id="-290jcl_21"><li class="list__item" id="-290jcl_24"><p id="-290jcl_27">Простое поведение объектов (Прототипы)</p></li><li class="list__item" id="-290jcl_25"><p id="-290jcl_28">Обработка данных и JSON-шаблонов для IoT-соединений</p></li><li class="list__item" id="-290jcl_26"><p id="-290jcl_29">Настройка и работа с архивами</p></li></ul><p id="-290jcl_22">Каждая из этих областей требует уникального подхода, который будет рассмотрен далее, начиная с простых сценариев и переходя к более сложным.</p></section><section class="chapter"><h2 id="-290jcl_5" data-toc="-290jcl_5"><span class="control" id="-290jcl_199">Базовая структура скрипта поведения</span></h2><p id="-290jcl_31"><span class="control" id="-290jcl_200">Behavior</span> &mdash; это скрипт, выполняемый при изменении экземпляра прототипа (например, при создании, редактировании или удалении объекта). Скрипты для прототипов задают поведение объекта в системе и позволяют реализовать базовые автоматические действия.</p><p id="-290jcl_32">Простейший скрипт для поведения прототипа экспортирует три функции:</p><ul class="list _bullet" id="-290jcl_33"><li class="list__item" id="-290jcl_201"><p id="-290jcl_204"><span class="control" id="-290jcl_205">on_create/1</span> &mdash; выполняется при создании экземпляра прототипа.</p></li><li class="list__item" id="-290jcl_202"><p id="-290jcl_206"><span class="control" id="-290jcl_207">on_edit/1</span> &mdash; выполняется при редактировании полей экземпляра прототипа.</p></li><li class="list__item" id="-290jcl_203"><p id="-290jcl_208"><span class="control" id="-290jcl_209">on_delete/1</span> &mdash; выполняется при удалении экземпляра прототипа.</p></li></ul><p id="-290jcl_34">Образец скрипта:</p><p id="-290jcl_35">%%-------------------------------------------------------</p><p id="-290jcl_36">%% This script is executed at the server side. The programming language</p><p id="-290jcl_37">%% is Erlang.</p><p id="-290jcl_38">%% The module MUST export next 3 methods:</p><p id="-290jcl_39">%% * on_create/1 - this method is called when a new instance of the prototype is created.</p><p id="-290jcl_40">%% * on_edit/1 - this method is called when own fields of an instance of the prototype are edited</p><p id="-290jcl_41">%% * on_delete/1 - this method is called when an instance of the prototype is deleted</p><p id="-290jcl_42">%% All this methods accept an Object of the instance and can edit or perform any other allowed code.</p><p id="-290jcl_43">%% If any of the methods throw or crash the whole transaction will rollback.</p><p id="-290jcl_44">%% If there are any warnings or not critical errors it is recommended to log them with available macros, examples:</p><p id="-290jcl_45">%% ?LOGWARNING( &quot;my warning text: ~p&quot;, [Warning] )</p><p id="-290jcl_46">%% ?LOGERROR( &quot;my error text: ~p&quot;, [Error] )</p><p id="-290jcl_47">%% If the methods performs well it should return atom 'ok'.</p><p id="-290jcl_48">%% For more info please refer to the documentation</p><p id="-290jcl_49">%%-------------------------------------------------------</p><p id="-290jcl_50">-module(fp_prototype_MyProto1).</p><p id="-290jcl_51">-include(&quot;fp_struct.hrl&quot;).</p><p id="-290jcl_52">-export([</p><p id="-290jcl_53"><code class="code" id="-290jcl_210">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_create/1,</p><p id="-290jcl_54"><code class="code" id="-290jcl_211">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_delete/1,</p><p id="-290jcl_55"><code class="code" id="-290jcl_212">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_edit/1</p><p id="-290jcl_56">]).</p><p id="-290jcl_57">on_create(_Object)-&gt;</p><p id="-290jcl_58"><code class="code" id="-290jcl_213">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_59">on_edit(_Object)-&gt;</p><p id="-290jcl_60"><code class="code" id="-290jcl_214">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_61">on_delete( Object )-&gt;</p><p id="-290jcl_62"><code class="code" id="-290jcl_215">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_63">Рассмотрим примеры создания скриптов, определяющих поведение прототипа на языке Erlang.</p><p id="-290jcl_64"><span class="control" id="-290jcl_216">Пример 1:</span></p><p id="-290jcl_65">%%-------------------------------------------------------</p><p id="-290jcl_66">%% This script is executed at the server side. The programming language</p><p id="-290jcl_67">%% is Erlang.</p><p id="-290jcl_68">%% The module MUST export next 3 methods:</p><p id="-290jcl_69">%% * on_create/1 - this method is called when a new instance of the prototype is created.</p><p id="-290jcl_70">%% * on_edit/1 - this method is called when own fields of an instance of the prototype are edited</p><p id="-290jcl_71">%% * on_delete/1 - this method is called when an instance of the prototype is deleted</p><p id="-290jcl_72">%% All these methods accept an Object of the instance and can edit or perform any other allowed code.</p><p id="-290jcl_73">%% If any of the methods throw or crash, the whole transaction will rollback.</p><p id="-290jcl_74">%% If there are any warnings or non-critical errors, it is recommended to log them with available macros, examples:</p><p id="-290jcl_75">%% ?LOGWARNING( &quot;my warning text: ~p&quot;, [Warning] )</p><p id="-290jcl_76">%% ?LOGERROR( &quot;my error text: ~p&quot;, [Error] )</p><p id="-290jcl_77">%% If the methods perform well, they should return the atom 'ok'.</p><p id="-290jcl_78">%% For more info, please refer to the documentation</p><p id="-290jcl_79">%%-------------------------------------------------------</p><p id="-290jcl_80">-module(fp_prototype_MyProto1).</p><p id="-290jcl_81">-include(&quot;fp_struct.hrl&quot;).</p><p id="-290jcl_82">-export([</p><p id="-290jcl_83"><code class="code" id="-290jcl_217">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_create/1,</p><p id="-290jcl_84"><code class="code" id="-290jcl_218">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_delete/1,</p><p id="-290jcl_85"><code class="code" id="-290jcl_219">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_edit/1</p><p id="-290jcl_86">]).</p><p id="-290jcl_87">on_create(Object) -&gt;</p><p id="-290jcl_88"><code class="code" id="-290jcl_220">&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Instance of MyProto1 created: <span id="-290jcl_221"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_89"><code class="code" id="-290jcl_222">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_90">on_edit(Object) -&gt;</p><p id="-290jcl_91"><code class="code" id="-290jcl_223">&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Fields of MyProto1 instance edited: <span id="-290jcl_224"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_92"><code class="code" id="-290jcl_225">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_93">on_delete(Object) -&gt;</p><p id="-290jcl_94"><code class="code" id="-290jcl_226">&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Instance of MyProto1 deleted: <span id="-290jcl_227"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_95"><code class="code" id="-290jcl_228">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_96">Этот скрипт реализует три метода: on_create, on_edit и on_delete, которые вызываются при создании, изменении и удалении экземпляра прототипа соответственно. В данном примере эти методы просто выводят сообщение в консоль, указывая на то, что произошло с экземпляром. Вы можете дополнить их логикой, соответствующей вашим требованиям.</p><p id="-290jcl_97"><span class="control" id="-290jcl_229">Пример 2:</span></p><p id="-290jcl_98">Давайте расширим последний скрипт для работы с прототипом, представляющим конкретное устройство. Для примера давайте предположим, что у нас есть прототип устройства, представляющего насос, и мы хотим, чтобы наш скрипт выполнял определенные действия в зависимости от состояния этого насоса.</p><p id="-290jcl_99">%%-------------------------------------------------------</p><p id="-290jcl_100">%% This script is executed at the server side. The programming language</p><p id="-290jcl_101">%% is Erlang.</p><p id="-290jcl_102">%% The module MUST export next 3 methods:</p><p id="-290jcl_103">%% * on_create/1 - this method is called when a new instance of the prototype is created.</p><p id="-290jcl_104">%% * on_edit/1 - this method is called when own fields of an instance of the prototype are edited</p><p id="-290jcl_105">%% * on_delete/1 - this method is called when an instance of the prototype is deleted</p><p id="-290jcl_106">%% All these methods accept an Object of the instance and can edit or perform any other allowed code.</p><p id="-290jcl_107">%% If any of the methods throw or crash, the whole transaction will rollback.</p><p id="-290jcl_108">%% If there are any warnings or non-critical errors, it is recommended to log them with available macros, examples:</p><p id="-290jcl_109">%% ?LOGWARNING( &quot;my warning text: ~p&quot;, [Warning] )</p><p id="-290jcl_110">%% ?LOGERROR( &quot;my error text: ~p&quot;, [Error] )</p><p id="-290jcl_111">%% If the methods perform well, they should return the atom 'ok'.</p><p id="-290jcl_112">%% For more info, please refer to the documentation</p><p id="-290jcl_113">%%-------------------------------------------------------</p><p id="-290jcl_114">-module(fp_prototype_Pump).</p><p id="-290jcl_115">-include(&quot;fp_struct.hrl&quot;).</p><p id="-290jcl_116">-export([</p><p id="-290jcl_117"><code class="code" id="-290jcl_230">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_create/1,</p><p id="-290jcl_118"><code class="code" id="-290jcl_231">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_delete/1,</p><p id="-290jcl_119"><code class="code" id="-290jcl_232">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_edit/1</p><p id="-290jcl_120">]).</p><p id="-290jcl_121">-define(PUMP_STATE_NORMAL, 0).</p><p id="-290jcl_122">-define(PUMP_STATE_WARNING, 1).</p><p id="-290jcl_123">-define(PUMP_STATE_ERROR, 2).</p><p id="-290jcl_124">on_create(Object) -&gt;</p><p id="-290jcl_125"><code class="code" id="-290jcl_233">&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump instance created: <span id="-290jcl_234"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_126"><code class="code" id="-290jcl_235">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_127">on_edit(Object) -&gt;</p><p id="-290jcl_128">% Проверяем состояние насоса и выполняем соответствующие действия</p><p id="-290jcl_129"><code class="code" id="-290jcl_236">&nbsp;&nbsp;&nbsp;&nbsp;</code> case Object#pump.state of</p><p id="-290jcl_130"><code class="code" id="-290jcl_237">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ?PUMP_STATE_NORMAL -&gt;</p><p id="-290jcl_131"><code class="code" id="-290jcl_238">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump is in normal state: <span id="-290jcl_239"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_132"><code class="code" id="-290jcl_240">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ok;</p><p id="-290jcl_133"><code class="code" id="-290jcl_241">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ?PUMP_STATE_WARNING -&gt;</p><p id="-290jcl_134"><code class="code" id="-290jcl_242">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump is in warning state: <span id="-290jcl_243"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_135"><code class="code" id="-290jcl_244">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ok;</p><p id="-290jcl_136"><code class="code" id="-290jcl_245">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ?PUMP_STATE_ERROR -&gt;</p><p id="-290jcl_137"><code class="code" id="-290jcl_246">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump is in error state: <span id="-290jcl_247"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_138"><code class="code" id="-290jcl_248">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ok</p><p id="-290jcl_139">end.</p><p id="-290jcl_140">on_delete(Object) -&gt;</p><p id="-290jcl_141"><code class="code" id="-290jcl_249">&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump instance deleted: <span id="-290jcl_250"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_142"><code class="code" id="-290jcl_251">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_143">Этот скрипт добавляет обработку состояния насоса в методе on_edit. В зависимости от состояния насоса он выводит соответствующее сообщение в консоль. Вы можете дополнить скрипт логикой обработки состояний насоса, включая отправку уведомлений, запись в журнал или выполнение дополнительных действий.</p><p id="-290jcl_144"><span class="control" id="-290jcl_252">Пример 3:</span></p><p id="-290jcl_145">Прототипы в SCADA-системах часто имеют набор полей, которые определяют их свойства и характеристики. Для дать определение прототипа на основании этого, мы можем добавить определение полей в Erlang-модуль прототипа. Вот пример определения прототипа на основании всего выше перечисленного:</p><p id="-290jcl_146">%%--------------------------------------------------------</p><p id="-290jcl_147">%% This script is executed at the server side. The programming language</p><p id="-290jcl_148">%% is Erlang.</p><p id="-290jcl_149">%% The module MUST export next 3 methods:</p><p id="-290jcl_150">%% * on_create/1 - this method is called when a new instance of the prototype is created.</p><p id="-290jcl_151">%% * on_edit/1 - this method is called when own fields of an instance of the prototype are edited</p><p id="-290jcl_152">%% * on_delete/1 - this method is called when an instance of the prototype is deleted</p><p id="-290jcl_153">%% All these methods accept an Object of the instance and can edit or perform any other allowed code.</p><p id="-290jcl_154">%% If any of the methods throw or crash, the whole transaction will rollback.</p><p id="-290jcl_155">%% If there are any warnings or non-critical errors, it is recommended to log them with available macros, examples:</p><p id="-290jcl_156">%% ?LOGWARNING( &quot;my warning text: ~p&quot;, [Warning] )</p><p id="-290jcl_157">%% ?LOGERROR( &quot;my error text: ~p&quot;, [Error] )</p><p id="-290jcl_158">%% If the methods perform well, they should return the atom 'ok'.</p><p id="-290jcl_159">%% For more info, please refer to the documentation</p><p id="-290jcl_160">%%--------------------------------------------------------</p><p id="-290jcl_161">-module(fp_prototype_Pump).</p><p id="-290jcl_162">-include(&quot;fp_struct.hrl&quot;).</p><p id="-290jcl_163">-export([</p><p id="-290jcl_164"><code class="code" id="-290jcl_253">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_create/1,</p><p id="-290jcl_165"><code class="code" id="-290jcl_254">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_delete/1,</p><p id="-290jcl_166"><code class="code" id="-290jcl_255">&nbsp;&nbsp;&nbsp;&nbsp;</code> on_edit/1</p><p id="-290jcl_167">]).</p><p id="-290jcl_168">-record(pump, {</p><p id="-290jcl_169"><code class="code" id="-290jcl_256">&nbsp;&nbsp;&nbsp;&nbsp;</code> id :: string(),</p><p id="-290jcl_170"><code class="code" id="-290jcl_257">&nbsp;&nbsp;&nbsp;&nbsp;</code> name :: string(),</p><p id="-290jcl_171"><code class="code" id="-290jcl_258">&nbsp;&nbsp;&nbsp;&nbsp;</code> type :: string(),</p><p id="-290jcl_172"><code class="code" id="-290jcl_259">&nbsp;&nbsp;&nbsp;&nbsp;</code> state :: integer()</p><p id="-290jcl_173">}).</p><p id="-290jcl_174">-define(PUMP_STATE_NORMAL, 0).</p><p id="-290jcl_175">-define(PUMP_STATE_WARNING, 1).</p><p id="-290jcl_176">-define(PUMP_STATE_ERROR, 2).</p><p id="-290jcl_177">on_create(Object) -&gt;</p><p id="-290jcl_178"><code class="code" id="-290jcl_260">&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump instance created: <span id="-290jcl_261"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_179"><code class="code" id="-290jcl_262">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_180">on_edit(Object) -&gt;</p><p id="-290jcl_181">% Проверяем состояние насоса и выполняем соответствующие действия</p><p id="-290jcl_182"><code class="code" id="-290jcl_263">&nbsp;&nbsp;&nbsp;&nbsp;</code> case Object#pump.state of</p><p id="-290jcl_183"><code class="code" id="-290jcl_264">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ?PUMP_STATE_NORMAL -&gt;</p><p id="-290jcl_184"><code class="code" id="-290jcl_265">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump is in normal state: <span id="-290jcl_266"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_185"><code class="code" id="-290jcl_267">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ok;</p><p id="-290jcl_186"><code class="code" id="-290jcl_268">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ?PUMP_STATE_WARNING -&gt;</p><p id="-290jcl_187"><code class="code" id="-290jcl_269">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump is in warning state: <span id="-290jcl_270"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_188"><code class="code" id="-290jcl_271">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ok;</p><p id="-290jcl_189"><code class="code" id="-290jcl_272">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ?PUMP_STATE_ERROR -&gt;</p><p id="-290jcl_190"><code class="code" id="-290jcl_273">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump is in error state: <span id="-290jcl_274"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_191"><code class="code" id="-290jcl_275">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> ok</p><p id="-290jcl_192">end.</p><p id="-290jcl_193">on_delete(Object) -&gt;</p><p id="-290jcl_194"><code class="code" id="-290jcl_276">&nbsp;&nbsp;&nbsp;&nbsp;</code> io:format(&quot;Pump instance deleted: <span id="-290jcl_277"><sub class="subscript">p</sub></span>n&quot;, [Object]),</p><p id="-290jcl_195"><code class="code" id="-290jcl_278">&nbsp;&nbsp;&nbsp;&nbsp;</code> ok.</p><p id="-290jcl_196">В этом примере добавлено определение полей прототипа pump, включая id, name, type и state. Для каждого поля указан тип данных. Теперь прототип насоса имеет определенную структуру данных, которая позволяет представлять его свойства и характеристики.</p><section class="chapter"><h3 id="-290jcl_197" data-toc="-290jcl_197"></h3><p id="-290jcl_279"><span class="control" id="-290jcl_402">Json-шаблоны</span> JSON (JavaScript Object Notation) - это легкий формат обмена данными, который широко используется для передачи структурированной информации между приложениями. В контексте IIoT-платформы, JSON-шаблоны играют ключевую роль в обмене данными с внешними системами. Вот как их создавать, использовать и примеры их применения:</p><ol class="list _decimal" id="-290jcl_280" type="1"><li class="list__item" id="-290jcl_403"><p id="-290jcl_404">Создание JSON-шаблонов:</p></li></ol><p id="-290jcl_281">&bull; Определите структуру данных: Прежде всего, определите, какие данные вы хотите передавать или получать. Разбейте их на логические блоки или объекты.</p><p id="-290jcl_282">&bull; Определите ключи и значения: Для каждого блока данных определите ключи и соответствующие значения. Ключи представляют собой названия атрибутов, а значения - сами данные.</p><p id="-290jcl_283">&bull; Следуйте синтаксису JSON: Убедитесь, что ваш JSON-шаблон соответствует синтаксису JSON. Он должен состоять из пар &quot;ключ: значение&quot;, разделенных запятыми, и ограниченных фигурными скобками для объектов.</p><ol class="list _decimal" id="-290jcl_284" type="1" start="2"><li class="list__item" id="-290jcl_405"><p id="-290jcl_406">Использование JSON-шаблонов:</p></li></ol><p id="-290jcl_285">&bull; Прием данных: Для приема данных из внешних систем, IIoT-платформа считывает JSON-шаблон, а затем обрабатывает полученные данные в соответствии с вашей логикой (скриптом).</p><p id="-290jcl_286">&bull; Отправка данных: Для отправки данных во внешние системы, сначала сформируйте JSON-шаблон в соответствии с требованиями внешней системы, затем отправьте его через соответствующий канал связи.</p><ol class="list _decimal" id="-290jcl_287" type="1" start="3"><li class="list__item" id="-290jcl_407"><p id="-290jcl_408">Использование различных структур данных в JSON-шаблонах.</p></li></ol><p id="-290jcl_288">Синтаксис JSON-шаблонов для IIoT-платформ может быть таким же, как и для обычных JSON-данных.</p><p id="-290jcl_289">В качестве значений в JSON-шаблонах могут передаваться как простые типы данных (переменные), так и массивы, и другие более сложные типы.</p><p id="-290jcl_290">Примеры типов данных, которые могут быть использованы в JSON-шаблонах IIoT-платформ:</p><p id="-290jcl_291">a) Массивы (Arrays):</p><p id="-290jcl_292">{</p><p id="-290jcl_293"><code class="code" id="-290jcl_409">&nbsp;&nbsp;&nbsp;</code> &quot;sensorData&quot;: {</p><p id="-290jcl_294"><code class="code" id="-290jcl_410">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;temperatures&quot;: [25.5, 26.1, 24.8],</p><p id="-290jcl_295"><code class="code" id="-290jcl_411">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;humidities&quot;: [60, 62, 58]</p><p id="-290jcl_296"><code class="code" id="-290jcl_412">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_297">}</p><p id="-290jcl_298">b) Объекты (Objects):</p><p id="-290jcl_299">{</p><p id="-290jcl_300"><code class="code" id="-290jcl_413">&nbsp;&nbsp;&nbsp;</code> &quot;sensorData&quot;: {</p><p id="-290jcl_301"><code class="code" id="-290jcl_414">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;location&quot;: {</p><p id="-290jcl_302"><code class="code" id="-290jcl_415">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;latitude&quot;: 40.7128,</p><p id="-290jcl_303"><code class="code" id="-290jcl_416">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;longitude&quot;: -74.0060</p><p id="-290jcl_304"><code class="code" id="-290jcl_417">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_305"><code class="code" id="-290jcl_418">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_306">}</p><p id="-290jcl_307">c) Строки (Strings), Числа (Numbers), Логические значения (Boolean):</p><p id="-290jcl_308">{</p><p id="-290jcl_309"><code class="code" id="-290jcl_419">&nbsp;&nbsp;&nbsp;</code> &quot;equipmentStatus&quot;: {</p><p id="-290jcl_310"><code class="code" id="-290jcl_420">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;pump1&quot;: true,</p><p id="-290jcl_311"><code class="code" id="-290jcl_421">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;pump2&quot;: false,</p><p id="-290jcl_312"><code class="code" id="-290jcl_422">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;errorCode&quot;: 123,</p><p id="-290jcl_313"><code class="code" id="-290jcl_423">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;message&quot;: &quot;Pump overheating&quot;</p><p id="-290jcl_314"><code class="code" id="-290jcl_424">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_315">}</p><p id="-290jcl_316">d) Null-значения (Null):</p><p id="-290jcl_317">{</p><p id="-290jcl_318"><code class="code" id="-290jcl_425">&nbsp;&nbsp;&nbsp;</code> &quot;configuration&quot;: {</p><p id="-290jcl_319"><code class="code" id="-290jcl_426">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;timeout&quot;: null</p><p id="-290jcl_320"><code class="code" id="-290jcl_427">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_321">}</p><p id="-290jcl_322">e) Вложенные структуры (Nested Structures):</p><p id="-290jcl_323">{</p><p id="-290jcl_324"><code class="code" id="-290jcl_428">&nbsp;&nbsp;&nbsp;</code> &quot;productionData&quot;: {</p><p id="-290jcl_325"><code class="code" id="-290jcl_429">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;line1&quot;: {</p><p id="-290jcl_326"><code class="code" id="-290jcl_430">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;output&quot;: 500,</p><p id="-290jcl_327"><code class="code" id="-290jcl_431">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;defects&quot;: [&quot;Scratch&quot;, &quot;Crack&quot;]</p><p id="-290jcl_328"><code class="code" id="-290jcl_432">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>},</p><p id="-290jcl_329"><code class="code" id="-290jcl_433">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;line2&quot;: {</p><p id="-290jcl_330"><code class="code" id="-290jcl_434">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;output&quot;: 600,</p><p id="-290jcl_331"><code class="code" id="-290jcl_435">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;defects&quot;: [&quot;Chip&quot;]</p><p id="-290jcl_332"><code class="code" id="-290jcl_436">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_333"><code class="code" id="-290jcl_437">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_334">}</p><ol class="list _decimal" id="-290jcl_335" type="1" start="4"><li class="list__item" id="-290jcl_438"><p id="-290jcl_439">Примеры использования JSON-шаблонов:</p></li></ol><p id="-290jcl_336">a) Пример JSON-шаблона для передачи данных о температуре и влажности с датчиков в IIoT-платформу:</p><p id="-290jcl_337">{</p><p id="-290jcl_338"><code class="code" id="-290jcl_440">&nbsp;&nbsp;&nbsp;</code> &quot;sensorData&quot;: {</p><p id="-290jcl_339"><code class="code" id="-290jcl_441">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;temperature&quot;: 25.5,</p><p id="-290jcl_340"><code class="code" id="-290jcl_442">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;humidity&quot;: 60</p><p id="-290jcl_341"><code class="code" id="-290jcl_443">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_342">}</p><p id="-290jcl_343">b) Пример JSON-шаблона для управления устройством через IIoT-платформу:</p><p id="-290jcl_344">{</p><p id="-290jcl_345"><code class="code" id="-290jcl_444">&nbsp;&nbsp;&nbsp;</code> &quot;deviceControl&quot;: {</p><p id="-290jcl_346"><code class="code" id="-290jcl_445">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;deviceId&quot;: &quot;123456&quot;,</p><p id="-290jcl_347"><code class="code" id="-290jcl_446">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;command&quot;: &quot;on&quot;</p><p id="-290jcl_348"><code class="code" id="-290jcl_447">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_349">}</p><p id="-290jcl_350">c) Пример JSON-шаблона для получения данных о состоянии оборудования из IIoT-платформы:</p><p id="-290jcl_351">{</p><p id="-290jcl_352"><code class="code" id="-290jcl_448">&nbsp;&nbsp;&nbsp;</code> &quot;equipmentStatus&quot;: {</p><p id="-290jcl_353"><code class="code" id="-290jcl_449">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;pump1&quot;: &quot;running&quot;,</p><p id="-290jcl_354"><code class="code" id="-290jcl_450">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;pump2&quot;: &quot;stopped&quot;</p><p id="-290jcl_355"><code class="code" id="-290jcl_451">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_356">}</p><p id="-290jcl_357">d) Пример JSON-шаблона для передачи данных о производственных параметрах:</p><p id="-290jcl_358">{</p><p id="-290jcl_359"><code class="code" id="-290jcl_452">&nbsp;&nbsp;&nbsp;</code> &quot;productionData&quot;: {</p><p id="-290jcl_360"><code class="code" id="-290jcl_453">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;machineId&quot;: &quot;123&quot;,</p><p id="-290jcl_361"><code class="code" id="-290jcl_454">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;temperature&quot;: 180,</p><p id="-290jcl_362"><code class="code" id="-290jcl_455">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;pressure&quot;: 45,</p><p id="-290jcl_363"><code class="code" id="-290jcl_456">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;output&quot;: 500</p><p id="-290jcl_364"><code class="code" id="-290jcl_457">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_365">}</p><p id="-290jcl_366">e) Пример JSON-шаблона для управления режимами работы оборудования:</p><p id="-290jcl_367">{</p><p id="-290jcl_368"><code class="code" id="-290jcl_458">&nbsp;&nbsp;&nbsp;</code> &quot;equipmentControl&quot;: {</p><p id="-290jcl_369"><code class="code" id="-290jcl_459">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;deviceId&quot;: &quot;789&quot;,</p><p id="-290jcl_370"><code class="code" id="-290jcl_460">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;mode&quot;: &quot;manual&quot;,</p><p id="-290jcl_371"><code class="code" id="-290jcl_461">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;settings&quot;: {</p><p id="-290jcl_372"><code class="code" id="-290jcl_462">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;speed&quot;: 50,</p><p id="-290jcl_373"><code class="code" id="-290jcl_463">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;temperatureSetpoint&quot;: 200</p><p id="-290jcl_374"><code class="code" id="-290jcl_464">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_375"><code class="code" id="-290jcl_465">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_376">}</p><p id="-290jcl_377">f) Пример JSON-шаблона для передачи событий и аварий:</p><p id="-290jcl_378">{</p><p id="-290jcl_379"><code class="code" id="-290jcl_466">&nbsp;&nbsp;&nbsp;</code> &quot;alarmData&quot;: {</p><p id="-290jcl_380"><code class="code" id="-290jcl_467">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;alarmId&quot;: &quot;ABC123&quot;,</p><p id="-290jcl_381"><code class="code" id="-290jcl_468">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;severity&quot;: &quot;high&quot;,</p><p id="-290jcl_382"><code class="code" id="-290jcl_469">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;description&quot;: &quot;Critical temperature threshold exceeded&quot;,</p><p id="-290jcl_383"><code class="code" id="-290jcl_470">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;timestamp&quot;: &quot;2024-05-02T10:30:00&quot;</p><p id="-290jcl_384"><code class="code" id="-290jcl_471">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_385">}</p><p id="-290jcl_386">g) Пример JSON-шаблона для запроса исторических данных:</p><p id="-290jcl_387">{</p><p id="-290jcl_388"><code class="code" id="-290jcl_472">&nbsp;&nbsp;&nbsp;</code> &quot;historicalDataRequest&quot;: {</p><p id="-290jcl_389"><code class="code" id="-290jcl_473">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;startDate&quot;: &quot;2024-04-01&quot;,</p><p id="-290jcl_390"><code class="code" id="-290jcl_474">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;endDate&quot;: &quot;2024-04-30&quot;,</p><p id="-290jcl_391"><code class="code" id="-290jcl_475">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;parameters&quot;: [&quot;temperature&quot;, &quot;pressure&quot;, &quot;output&quot;]</p><p id="-290jcl_392"><code class="code" id="-290jcl_476">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_393">}</p><p id="-290jcl_394">h) Пример JSON-шаблона для передачи информации о системных настройках:</p><p id="-290jcl_395">{</p><p id="-290jcl_396"><code class="code" id="-290jcl_477">&nbsp;&nbsp;&nbsp;</code> &quot;systemSettings&quot;: {</p><p id="-290jcl_397"><code class="code" id="-290jcl_478">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;samplingRate&quot;: 1000,</p><p id="-290jcl_398"><code class="code" id="-290jcl_479">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;language&quot;: &quot;en&quot;,</p><p id="-290jcl_399"><code class="code" id="-290jcl_480">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> &quot;timezone&quot;: &quot;UTC+3&quot;</p><p id="-290jcl_400"><code class="code" id="-290jcl_481">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_401">}</p></section><section class="chapter"><h3 id="json" data-toc="json"><span class="control" id="-290jcl_523">Использование скриптов для обработки Json-шаблонов</span></h3><ol class="list _decimal" id="-290jcl_483" type="1"><li class="list__item" id="-290jcl_524"><p id="-290jcl_525">Скрипт Erlang для обработки JSON-шаблонов:</p></li></ol><p id="-290jcl_484">-module(json_handler).</p><p id="-290jcl_485">-export([process_json/1]).</p><p id="-290jcl_486">% Функция для обработки JSON-шаблонов</p><p id="-290jcl_487">process_json(JsonData) -&gt;</p><p id="-290jcl_488">% Парсим JSON</p><p id="-290jcl_489">{ok, Json} = jsx:decode(JsonData),</p><p id="-290jcl_490"><code class="code" id="-290jcl_526">&nbsp;</code>% Выполняем операции в зависимости от типа данных</p><p id="-290jcl_491"><code class="code" id="-290jcl_527">&nbsp;</code> case proplists:get_value(&lt;&lt;&quot;sensorData&quot;&gt;&gt;, Json) of</p><p id="-290jcl_492"><code class="code" id="-290jcl_528">&nbsp;</code> undefined -&gt;</p><p id="-290jcl_493"><code class="code" id="-290jcl_529">&nbsp;</code> io:format(&quot;Unknown JSON data: <span id="-290jcl_530"><sub class="subscript">p</sub></span>n&quot;, [Json]);</p><p id="-290jcl_494"><code class="code" id="-290jcl_531">&nbsp;</code> SensorData -&gt;</p><p id="-290jcl_495"><code class="code" id="-290jcl_532">&nbsp;</code>% Обрабатываем данные о датчиках</p><p id="-290jcl_496"><code class="code" id="-290jcl_533">&nbsp;</code> process_sensor_data(SensorData)</p><p id="-290jcl_497"><code class="code" id="-290jcl_534">&nbsp;</code> end.</p><p id="-290jcl_498">% Функция для обработки данных о датчиках</p><p id="-290jcl_499">process_sensor_data(SensorData) -&gt;</p><p id="-290jcl_500">Temperature = proplists:get_value(&lt;&lt;&quot;temperature&quot;&gt;&gt;, SensorData),</p><p id="-290jcl_501">Humidity = proplists:get_value(&lt;&lt;&quot;humidity&quot;&gt;&gt;, SensorData),</p><p id="-290jcl_502">io:format(&quot;Received sensor data - Temperature: ~p, Humidity: <span id="-290jcl_535"><sub class="subscript">p</sub></span>n&quot;, [Temperature, Humidity]).</p><ol class="list _decimal" id="-290jcl_503" type="1" start="2"><li class="list__item" id="-290jcl_536"><p id="-290jcl_537">Скрипт JavaScript для обработки JSON-шаблонов:</p></li></ol><p id="-290jcl_504">// Функция для обработки JSON-шаблонов</p><p id="-290jcl_505">function processJson(jsonData) {</p><p id="-290jcl_506"><code class="code" id="-290jcl_538">&nbsp;&nbsp;&nbsp;</code>// Разбираем (&quot;парсим&quot;) JSON</p><p id="-290jcl_507"><code class="code" id="-290jcl_539">&nbsp;&nbsp;&nbsp;</code> const json = JSON.parse(jsonData);</p><p id="-290jcl_508"><code class="code" id="-290jcl_540">&nbsp;&nbsp;&nbsp;</code>// Выполняем операции в зависимости от типа данных</p><p id="-290jcl_509"><code class="code" id="-290jcl_541">&nbsp;&nbsp;&nbsp;</code> if (json.sensorData) {</p><p id="-290jcl_510"><code class="code" id="-290jcl_542">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>// Обрабатываем данные о датчиках</p><p id="-290jcl_511"><code class="code" id="-290jcl_543">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> processSensorData(json.sensorData);</p><p id="-290jcl_512"><code class="code" id="-290jcl_544">&nbsp;&nbsp;&nbsp;</code>} else {</p><p id="-290jcl_513"><code class="code" id="-290jcl_545">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code> console.log(&quot;Unknown JSON data:&quot;, json);</p><p id="-290jcl_514"><code class="code" id="-290jcl_546">&nbsp;&nbsp;&nbsp;</code>}</p><p id="-290jcl_515">}</p><p id="-290jcl_516">// Функция для обработки данных о датчиках</p><p id="-290jcl_517">function processSensorData(sensorData) {</p><p id="-290jcl_518"><code class="code" id="-290jcl_547">&nbsp;&nbsp;&nbsp;</code> const temperature = sensorData.temperature;</p><p id="-290jcl_519"><code class="code" id="-290jcl_548">&nbsp;&nbsp;&nbsp;</code> const humidity = sensorData.humidity;</p><p id="-290jcl_520"><code class="code" id="-290jcl_549">&nbsp;&nbsp;&nbsp;</code> console.log(<code class="code" id="-290jcl_550">Received sensor data - Temperature: ${temperature}, Humidity: ${humidity}</code>);</p><p id="-290jcl_521">}</p><p id="-290jcl_522">\</p></section></section><div class="last-modified">25 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="сообщения.html" class="navigation-links__prev">Сообщения</a><a href="права.html" class="navigation-links__next">Права</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>